System.register("chunks:///_virtual/AttackSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Weapon.ts","./Enemy.ts","./EnemyManager.ts","./AudioManager.ts"],(function(t){var a,e,n,r,i,o,c,s,u,l,f,g,p,d,h,k,m,v;return{setters:[function(t){a=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,i=t.createForOfIteratorHelperLoose},function(t){o=t.cclegacy,c=t._decorator,s=t.Prefab,u=t.find,l=t.Vec3,f=t.instantiate,g=t.UIOpacity,p=t.tween,d=t.Component},function(t){h=t.Weapon},function(t){k=t.Enemy},function(t){m=t.EnemyManager},function(t){v=t.AudioManager}],execute:function(){var y,A,M,C,E,b,P;o._RF.push({},"31da23AJChNxaCRZdZTilYN","AttackSystem",void 0);var I=c.ccclass,w=c.property;t("AttackSystem",(y=I("AttackSystem"),A=w(s),y((E=a((C=function(t){function a(){for(var a,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return a=t.call.apply(t,[this].concat(i))||this,n(a,"attackInterval",E,r(a)),n(a,"attackRange",b,r(a)),n(a,"attackEffectPrefab",P,r(a)),a.weaponManager=null,a.enemyManager=null,a.audioManager=null,a.isAttacking=!1,a.attackTimer=0,a}e(a,t);var o=a.prototype;return o.start=function(){var t=u("Canvas/WeaponManager");t&&(this.weaponManager=t.getComponent("WeaponManager"));var a=u("Canvas/EnemyManager");a&&(this.enemyManager=a.getComponent(m));var e=u("Canvas/AudioManager");e&&(this.audioManager=e.getComponent(v))},o.update=function(t){this.isAttacking&&(this.attackTimer+=t,this.attackTimer>=this.attackInterval&&(this.attackTimer=0,this.performAttack()))},o.startAttacking=function(){this.isAttacking=!0,this.attackTimer=0},o.stopAttacking=function(){this.isAttacking=!1,this.attackTimer=0},o.performAttack=function(){var t=this;if(this.weaponManager&&this.enemyManager){var a=u("Canvas/Backpack");if(a){var e=a.children.filter((function(t){var a=t.getComponent(h);return a&&a.isInBackpack()}));if(0!==e.length){var n=this.enemyManager.node.children.filter((function(t){var a=t.getComponent(k);return a&&a.isAlive()}));0!==n.length&&e.forEach((function(a){var e=a.getComponent(h);if(e){var r=t.findNearestEnemyInRange(a,n);r&&t.attackEnemy(e,r)}}))}}}},o.findNearestEnemyInRange=function(t,a){var e=this,n=null,r=1/0,i=t.getWorldPosition();return a.forEach((function(t){var a=t.getWorldPosition(),o=l.distance(i,a);o<=e.attackRange&&o<r&&(r=o,n=t)})),n},o.attackEnemy=function(t,a){var e=a.getComponent(k);if(e){var n=this.calculateDamage(t.weaponType);this.createAttackEffect(t.node,a);var r=e.takeDamage(n);this.playAttackSound(t.weaponType),r&&this.onEnemyKilled(t,e)}},o.calculateDamage=function(t){switch(t){case"1slot":return 1;case"2slot":return 2;case"3slot":return 3;case"rare":return 5;case"1slot_merge":return 3;case"3slot_merge":return 8;default:return 1}},o.createAttackEffect=function(t,a){if(this.attackEffectPrefab){var e=f(this.attackEffectPrefab),n=t.getWorldPosition(),r=a.getWorldPosition(),i=n.add(r).multiplyScalar(.5);e.setPosition(i);var o=u("Canvas");if(o){o.addChild(e);var c=e.getComponent(g);c||(c=e.addComponent(g)),p(c).to(.3,{opacity:0}).call((function(){e&&e.isValid&&e.destroy()})).start()}}},o.playAttackSound=function(t){if(this.audioManager)switch(t){case"1slot":case"2slot":case"3slot":this.audioManager.playPickupSound();break;case"rare":case"1slot_merge":case"3slot_merge":this.audioManager.playAttackMergedSound();break;default:this.audioManager.playPickupSound()}},o.onEnemyKilled=function(t,a){},o.hasEnemiesInRange=function(){if(!this.enemyManager)return!1;var t=this.enemyManager.node.children.filter((function(t){var a=t.getComponent(k);return a&&a.isAlive()}));if(0===t.length)return!1;var a=u("Canvas/Backpack");if(!a)return!1;for(var e,n=a.children.filter((function(t){var a=t.getComponent(h);return a&&a.isInBackpack()})),r=i(n);!(e=r()).done;)for(var o,c=e.value.getWorldPosition(),s=i(t);!(o=s()).done;){var f=o.value.getWorldPosition();if(l.distance(c,f)<=this.attackRange)return!0}return!1},o.isAttackSystemActive=function(){return this.isAttacking},o.getAttackInterval=function(){return this.attackInterval},o.setAttackInterval=function(t){this.attackInterval=Math.max(.1,t)},a}(d)).prototype,"attackInterval",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),b=a(C.prototype,"attackRange",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 300}}),P=a(C.prototype,"attackEffectPrefab",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=C))||M));o._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var o,i,u,t,n,r,l,a,s,c,d;return{setters:[function(e){o=e.applyDecoratedDescriptor,i=e.inheritsLoose,u=e.initializerDefineProperty,t=e.assertThisInitialized},function(e){n=e.cclegacy,r=e._decorator,l=e.AudioSource,a=e.AudioClip,s=e.game,c=e.resources,d=e.Component}],execute:function(){var p,f,m,h,S,y,x,g,V,A,b,w,M,v,k,z,D,F,P,C,_,E,G,B,X,L,R,T,W,j,H,I,N,q,J,K,O,Q,U,Y,Z,$,ee;n._RF.push({},"6e9bdoVGDFGy5go97L6+tto","AudioManager",void 0);var oe=r.ccclass,ie=r.property;e("AudioManager",(p=oe("AudioManager"),f=ie({type:l}),m=ie({type:a}),h=ie({type:a}),S=ie({type:a}),y=ie({type:a}),x=ie({type:a}),g=ie({type:a}),V=ie({type:a}),A=ie({type:a}),b=ie({type:a}),w=ie({range:[0,1,.1]}),M=ie({range:[0,1,.1]}),v=ie({range:[0,1,.1]}),k=ie({range:[0,1,.1]}),z=ie({range:[0,1,.1]}),D=ie({range:[0,1,.1]}),F=ie({range:[0,1,.1]}),P=ie({range:[0,1,.1]}),C=ie({range:[0,1,.1]}),_=ie({range:[0,1,.1]}),p((B=o((G=function(e){function o(){for(var o,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return o=e.call.apply(e,[this].concat(n))||this,u(o,"audioSource",B,t(o)),u(o,"bgmClip",X,t(o)),u(o,"pickupSound",L,t(o)),u(o,"placeSound",R,t(o)),u(o,"attackMergedSound",T,t(o)),u(o,"weaponSpawnSound",W,t(o)),u(o,"alertSound",j,t(o)),u(o,"victorySound",H,t(o)),u(o,"enemyDieSound",I,t(o)),u(o,"congratsSound",N,t(o)),u(o,"bgmVolume",q,t(o)),u(o,"sfxVolume",J,t(o)),u(o,"pickupVolume",K,t(o)),u(o,"placeVolume",O,t(o)),u(o,"attackMergedVolume",Q,t(o)),u(o,"weaponSpawnVolume",U,t(o)),u(o,"alertVolume",Y,t(o)),u(o,"victoryVolume",Z,t(o)),u(o,"enemyDieVolume",$,t(o)),u(o,"congratsVolume",ee,t(o)),o.sfxAudioSource=null,o}i(o,e);var n=o.prototype;return n.start=function(){var e=this;s.addPersistRootNode(this.node),this.sfxAudioSource=this.node.addComponent(l),this.setBGMVolume(this.bgmVolume),this.setSFXVolume(this.sfxVolume),this.audioSource&&this.bgmClip?(this.audioSource.clip=this.bgmClip,this.audioSource.loop=!0,this.audioSource.play()):c.load("Sounds/full",a,(function(o,i){!o&&e.audioSource&&(e.audioSource.clip=i,e.audioSource.loop=!0,e.audioSource.play())}))},n.setBGMVolume=function(e){this.bgmVolume=Math.max(0,Math.min(1,e)),this.audioSource&&(this.audioSource.volume=this.bgmVolume)},n.setSFXVolume=function(e){this.sfxVolume=Math.max(0,Math.min(1,e)),this.sfxAudioSource&&(this.sfxAudioSource.volume=this.sfxVolume)},n.getBGMVolume=function(){return this.bgmVolume},n.getSFXVolume=function(){return this.sfxVolume},n.setPickupVolume=function(e){this.pickupVolume=Math.max(0,Math.min(1,e))},n.setPlaceVolume=function(e){this.placeVolume=Math.max(0,Math.min(1,e))},n.setAttackMergedVolume=function(e){this.attackMergedVolume=Math.max(0,Math.min(1,e))},n.setWeaponSpawnVolume=function(e){this.weaponSpawnVolume=Math.max(0,Math.min(1,e))},n.setAlertVolume=function(e){this.alertVolume=Math.max(0,Math.min(1,e))},n.getPickupVolume=function(){return this.pickupVolume},n.getPlaceVolume=function(){return this.placeVolume},n.getAttackMergedVolume=function(){return this.attackMergedVolume},n.getWeaponSpawnVolume=function(){return this.weaponSpawnVolume},n.getAlertVolume=function(){return this.alertVolume},n.setVictoryVolume=function(e){this.victoryVolume=Math.max(0,Math.min(1,e))},n.getVictoryVolume=function(){return this.victoryVolume},n.setEnemyDieVolume=function(e){this.enemyDieVolume=Math.max(0,Math.min(1,e))},n.getEnemyDieVolume=function(){return this.enemyDieVolume},n.playPickupSound=function(){this.sfxAudioSource&&this.pickupSound&&(this.sfxAudioSource.clip=this.pickupSound,this.sfxAudioSource.loop=!1,this.sfxAudioSource.volume=this.pickupVolume*this.sfxVolume,this.sfxAudioSource.play())},n.playPlaceSound=function(){this.sfxAudioSource&&this.placeSound&&(this.sfxAudioSource.clip=this.placeSound,this.sfxAudioSource.loop=!1,this.sfxAudioSource.volume=this.placeVolume*this.sfxVolume,this.sfxAudioSource.play())},n.playAttackMergedSound=function(){this.sfxAudioSource&&this.attackMergedSound&&(this.sfxAudioSource.clip=this.attackMergedSound,this.sfxAudioSource.loop=!1,this.sfxAudioSource.volume=this.attackMergedVolume*this.sfxVolume,this.sfxAudioSource.play())},n.playWeaponSpawnSound=function(){this.sfxAudioSource&&this.weaponSpawnSound&&(this.sfxAudioSource.clip=this.weaponSpawnSound,this.sfxAudioSource.loop=!1,this.sfxAudioSource.volume=this.weaponSpawnVolume*this.sfxVolume,this.sfxAudioSource.play())},n.playAlertSound=function(){var e=this;this.sfxAudioSource&&this.alertSound?(this.sfxAudioSource.clip=this.alertSound,this.sfxAudioSource.volume=this.sfxVolume*this.alertVolume,this.sfxAudioSource.play()):c.load("Sounds/sfx_alert",a,(function(o,i){!o&&e.sfxAudioSource&&(e.sfxAudioSource.clip=i,e.sfxAudioSource.volume=e.sfxVolume*e.alertVolume,e.sfxAudioSource.play())}))},n.playVictorySound=function(){var e=this;this.sfxAudioSource&&this.victorySound?(this.sfxAudioSource.clip=this.victorySound,this.sfxAudioSource.volume=this.sfxVolume*this.victoryVolume*1.5,this.sfxAudioSource.play()):c.load("Sounds/sfx_victory",a,(function(o,i){!o&&e.sfxAudioSource?(e.sfxAudioSource.clip=i,e.sfxAudioSource.volume=e.sfxVolume*e.victoryVolume*1.5,e.sfxAudioSource.play()):console.error("[AudioManager] Failed to load victory sound:",o)}))},n.playEnemyDieSound=function(){var e=this;this.sfxAudioSource&&this.enemyDieSound?(this.sfxAudioSource.clip=this.enemyDieSound,this.sfxAudioSource.loop=!1,this.sfxAudioSource.volume=this.enemyDieVolume*this.sfxVolume,this.sfxAudioSource.play()):c.load("Sounds/sfx_enemy_die",a,(function(o,i){!o&&e.sfxAudioSource?(e.sfxAudioSource.clip=i,e.sfxAudioSource.volume=e.enemyDieVolume*e.sfxVolume,e.sfxAudioSource.play()):console.error("[AudioManager] Failed to load enemy die sound:",o)}))},n.stopAlertSound=function(){this.sfxAudioSource&&this.sfxAudioSource.playing&&this.sfxAudioSource.clip===this.alertSound&&this.sfxAudioSource.stop()},n.stopAllSFX=function(){this.sfxAudioSource&&this.sfxAudioSource.playing&&this.sfxAudioSource.stop()},n.testEnemyDieSound=function(){console.log("[AudioManager] Testing enemy die sound..."),this.playEnemyDieSound()},n.testVictorySound=function(){console.log("[AudioManager] Testing victory sound with high volume..."),this.playVictorySound()},n.playCongratsSound=function(){var e=this;this.sfxAudioSource&&this.congratsSound?(this.sfxAudioSource.clip=this.congratsSound,this.sfxAudioSource.loop=!1,this.sfxAudioSource.volume=this.congratsVolume*this.sfxVolume,this.sfxAudioSource.play()):c.load("Sounds/congrats",a,(function(o,i){!o&&e.sfxAudioSource?(e.sfxAudioSource.clip=i,e.sfxAudioSource.volume=e.congratsVolume*e.sfxVolume,e.sfxAudioSource.play()):console.error("[AudioManager] Failed to load congrats sound:",o)}))},o}(d)).prototype,"audioSource",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=o(G.prototype,"bgmClip",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=o(G.prototype,"pickupSound",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=o(G.prototype,"placeSound",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=o(G.prototype,"attackMergedSound",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=o(G.prototype,"weaponSpawnSound",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=o(G.prototype,"alertSound",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=o(G.prototype,"victorySound",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=o(G.prototype,"enemyDieSound",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=o(G.prototype,"congratsSound",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=o(G.prototype,"bgmVolume",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),J=o(G.prototype,"sfxVolume",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.7}}),K=o(G.prototype,"pickupVolume",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),O=o(G.prototype,"placeVolume",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Q=o(G.prototype,"attackMergedVolume",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),U=o(G.prototype,"weaponSpawnVolume",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),Y=o(G.prototype,"alertVolume",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Z=o(G.prototype,"victoryVolume",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),$=o(G.prototype,"enemyDieVolume",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),ee=o(G.prototype,"congratsVolume",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),E=G))||E));n._RF.pop()}}}));

System.register("chunks:///_virtual/BackpackManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Slot.ts"],(function(t){var e,o,r,i,n,a,l,s,c,p,u,h,d,g,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized,n=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy,l=t._decorator,s=t.SpriteFrame,c=t.Node,p=t.Sprite,u=t.UITransform,h=t.Vec3,d=t.Vec2,g=t.Component},function(t){f=t.Slot}],execute:function(){var S,m,v,_,y,z,B;a._RF.push({},"00075B3Rf5MFLM8rZm+oHKx","BackpackManager",void 0);var C=l.ccclass,b=l.property;t("BackpackManager",(S=C("BackpackManager"),m=b(s),S((y=e((_=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,r(e,"slotSprite",y,i(e)),r(e,"slotSize",z,i(e)),r(e,"gap",B,i(e)),e}o(e,t);var a=e.prototype;return a.start=function(){this.createGrid(3,3)},a.createGrid=function(t,e){for(var o=-(e-1)*(this.slotSize+this.gap)/2,r=(t-1)*(this.slotSize+this.gap)/2,i=0;i<t;i++)for(var n=0;n<e;n++){var a=new c("Slot_"+i+"_"+n);a.addComponent(p).spriteFrame=this.slotSprite;var l=a.getComponent(u);l&&l.setContentSize(this.slotSize,this.slotSize),a.addComponent(f);var s=o+n*(this.slotSize+this.gap),d=r-i*(this.slotSize+this.gap);a.setPosition(new h(s,d,0)),this.node.addChild(a)}},a.getSlotAtWorldPosition=function(t){for(var e,o=null,r=1/0,i=n(this.node.children);!(e=i()).done;){var a=e.value,l=a.getComponent(u).getBoundingBoxToWorld();if(l.contains(new d(t.x,t.y)))return a;var s=new d(l.x+l.width/2,l.y+l.height/2),c=d.distance(s,new d(t.x,t.y));c<r&&(r=c,o=a)}return o&&r<.7*this.slotSize?o:null},a.getSlotsForWeapon=function(t,e){"1slot_merge"===e&&(e="1slot"),"3slot_merge"===e&&(e="3slot");var o=t.name.match(/Slot_(\d+)_(\d+)/);if(!o)return[];var r=parseInt(o[1]),i=parseInt(o[2]),n=[];if("1slot"===e||"rare"===e)n.push(t);else if("2slot"===e){var a=this.node.getChildByName("Slot_"+r+"_"+i),l=this.node.getChildByName("Slot_"+r+"_"+(i+1));a&&l&&n.push(a,l)}else if("3slot"===e){var s=this.node.getChildByName("Slot_"+r+"_"+i),c=this.node.getChildByName("Slot_"+(r+1)+"_"+i),p=this.node.getChildByName("Slot_"+(r+2)+"_"+i);s&&c&&p&&n.push(s,c,p)}return"2slot"===e&&2!==n.length||"3slot"===e&&3!==n.length?[]:n},e}(g)).prototype,"slotSprite",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(_.prototype,"slotSize",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),B=e(_.prototype,"gap",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),v=_))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/ButtonManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WeaponManager.ts","./EnemyManager.ts"],(function(t){var n,i,e,a,o,s,h,u,r,c,g,l,f,B;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,h=t.Node,u=t.find,r=t.Vec3,c=t.tween,g=t.Button,l=t.Component},function(t){f=t.WeaponManager},function(t){B=t.EnemyManager}],execute:function(){var p,y,v,m,w,M,C;o._RF.push({},"29e19Qvh4BJW64CVxoK4TN3","ButtonManager",void 0);var N=s.ccclass,k=s.property;t("ButtonManager",(p=N("ButtonManager"),y=k(h),v=k(h),p((M=n((w=function(t){function n(){for(var n,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=t.call.apply(t,[this].concat(o))||this,e(n,"fightButton",M,a(n)),e(n,"playNowButton",C,a(n)),n.weaponManager=null,n.enemyManager=null,n.lastBackpackState=!1,n}i(n,t);var o=n.prototype;return o.start=function(){var t=u("Canvas/WeaponManager");t&&(this.weaponManager=t.getComponent(f));var n=u("Canvas/EnemyManager");n&&(this.enemyManager=n.getComponent(B)),this.fightButton&&(this.fightButton.active=!1),this.disableButtonHover(),this.setupFightButtonClick()},o.update=function(){if(this.weaponManager){var t=this.weaponManager.checkBackpackFull();t!==this.lastBackpackState&&(this.lastBackpackState=t,t?this.showFightButtonWithEffect():this.hideFightButton())}},o.showFightButtonWithEffect=function(){this.fightButton&&(this.fightButton.active=!0,this.fightButton.setScale(new r(0,0,1)),c(this.fightButton).to(.3,{scale:new r(1,1,1)}).start())},o.hideFightButton=function(){this.fightButton&&(this.fightButton.active=!1)},o.disableButtonHover=function(){if(this.fightButton){var t=this.fightButton.getComponent(g);t&&(t.transition=g.Transition.NONE,t.zoomScale=1)}if(this.playNowButton){var n=this.playNowButton.getComponent(g);n&&(n.transition=g.Transition.NONE,n.zoomScale=1)}},o.setupFightButtonClick=function(){this.fightButton&&(this.fightButton.getComponent(g)&&this.fightButton.on(h.EventType.TOUCH_END,this.onFightButtonClick,this))},o.onFightButtonClick=function(){if(this.fightButton&&(this.fightButton.active=!1),this.enemyManager)this.enemyManager.startSpawning();else{var t=u("Canvas/EnemyManager");t&&(this.enemyManager=t.getComponent(B),this.enemyManager&&this.enemyManager.startSpawning())}},o.hideAllButtons=function(){this.fightButton&&(this.fightButton.active=!1),this.playNowButton&&(this.playNowButton.active=!1)},o.showAllButtons=function(){this.fightButton&&(this.fightButton.active=!0),this.playNowButton&&(this.playNowButton.active=!0)},n}(l)).prototype,"fightButton",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=n(w.prototype,"playNowButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=w))||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/CanvasSize.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,r,o;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,r=t._decorator,o=t.Component}],execute:function(){var a;e._RF.push({},"91590dysHVG4apWMXDEmOiE","CanvasSize",void 0);var i=r.ccclass;r.property,t("CanvasSize",i("CanvasSize")(a=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var r=e.prototype;return r.start=function(){},r.update=function(t){},e}(o))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/ClickHandAnimation.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Weapon.ts"],(function(i){var n,t,o,e,a,s,r,c,l,u,d,h,p;return{setters:[function(i){n=i.applyDecoratedDescriptor,t=i.inheritsLoose,o=i.initializerDefineProperty,e=i.assertThisInitialized,a=i.createForOfIteratorHelperLoose},function(i){s=i.cclegacy,r=i._decorator,c=i.Node,l=i.find,u=i.Vec3,d=i.tween,h=i.Component},function(i){p=i.Weapon}],execute:function(){var g,f,k,m,y,w,b,C,v,A,I,D,P,W,N;s._RF.push({},"0c9853QtX9F5rMiXELPMB/4","ClickHandAnimation",void 0);var z=r.ccclass,O=r.property;i("ClickHandAnimation",(g=z("ClickHandAnimation"),f=O(c),k=O(c),m=O(c),y=O(c),g((C=n((b=function(i){function n(){for(var n,t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return n=i.call.apply(i,[this].concat(a))||this,o(n,"instructionsNode",C,e(n)),o(n,"backpackNode",v,e(n)),o(n,"handCursor",A,e(n)),o(n,"weaponIcon",I,e(n)),o(n,"animationDuration",D,e(n)),o(n,"clickDelay",P,e(n)),o(n,"dragDelay",W,e(n)),o(n,"dropDelay",N,e(n)),n.isAnimating=!1,n.isStopped=!1,n}t(n,i);var s=n.prototype;return s.start=function(){var i=this;this.scheduleOnce((function(){i.startGuideAnimation()}),1),this.listenToWeaponDragEvents()},s.listenToWeaponDragEvents=function(){l("Canvas/WeaponManager")&&this.schedule(this.checkWeaponDragEvents,.1)},s.checkWeaponDragEvents=function(){if(!this.isStopped){var i=l("Canvas/WeaponManager");if(i)for(var n,t=i.children,o=a(t);!(n=o()).done;){var e=n.value.getComponent(p);if(e&&e.node.active&&e.originalPosition&&u.distance(e.node.getPosition(),e.originalPosition)>5)return void this.stopGuideAnimation()}}},s.stopGuideAnimation=function(){this.isStopped||(this.isStopped=!0,this.isAnimating=!1,this.unscheduleAllCallbacks(),this.weaponIcon&&(this.weaponIcon.active=!1),this.handCursor&&(this.handCursor.active=!1),console.log("[ClickHandAnimation] Guide animation stopped due to weapon drag"))},s.startGuideAnimation=function(){this.isAnimating||this.isStopped||(this.isAnimating=!0,this.playClickAndDragAnimation())},s.playClickAndDragAnimation=function(){var i=this;if(this.instructionsNode&&this.backpackNode&&this.handCursor&&this.weaponIcon){var n=u.distance(this.weaponIcon.getWorldPosition(),this.backpackNode.getWorldPosition())<10,t=u.distance(this.handCursor.getWorldPosition(),this.backpackNode.getWorldPosition())<10;n&&t||this.resetPositions(),this.scheduleOnce((function(){i.clickOnInstructions()}),this.clickDelay),this.scheduleOnce((function(){i.dragToBackpack()}),this.clickDelay+this.dragDelay),this.scheduleOnce((function(){i.dropInBackpack()}),this.clickDelay+this.dragDelay+this.dropDelay),this.scheduleOnce((function(){i.isAnimating=!1,i.startGuideAnimation()}),this.animationDuration)}else console.error("[ClickHandAnimation] Missing required nodes!")},s.clickOnInstructions=function(){d(this.instructionsNode).to(.15,{scale:new u(.92,.92,1)},{easing:"quadOut"}).to(.15,{scale:new u(1,1,1)},{easing:"quadIn"}).start(),this.handCursor&&d(this.handCursor).to(.1,{scale:new u(.85,.85,1)},{easing:"quadOut"}).to(.1,{scale:new u(1,1,1)},{easing:"quadIn"}).start()},s.dragToBackpack=function(){if(this.weaponIcon){var i=this.backpackNode.getWorldPosition(),n=this.instructionsNode.getWorldPosition();this.weaponIcon&&this.weaponIcon.parent!==this.instructionsNode&&this.instructionsNode.addChild(this.weaponIcon),this.handCursor&&this.handCursor.parent!==this.instructionsNode&&this.instructionsNode.addChild(this.handCursor),d(this.weaponIcon).to(1.8,{worldPosition:i},{easing:"sineInOut",onUpdate:function(t,o){var e=n.x+(i.x-n.x)*o,a=n.y+(i.y-n.y)*o+80*Math.sin(o*Math.PI)*(1-.5*o);t.setWorldPosition(new u(e,a,n.z))}}).start(),this.handCursor&&d(this.handCursor).to(1.8,{worldPosition:i},{easing:"sineInOut",onUpdate:function(t,o){var e=n.x+(i.x-n.x)*o,a=n.y+(i.y-n.y)*o+60*Math.sin(o*Math.PI)*(1-.5*o)-15;t.setWorldPosition(new u(e,a,n.z))}}).start()}},s.dropInBackpack=function(){},s.resetPositions=function(){this.weaponIcon&&(this.weaponIcon.setScale(new u(1,1,1)),this.weaponIcon.setWorldPosition(this.instructionsNode.getWorldPosition())),this.handCursor&&(this.handCursor.setScale(new u(1,1,1)),this.handCursor.setWorldPosition(this.instructionsNode.getWorldPosition()))},s.stopAnimation=function(){this.isAnimating=!1,this.unscheduleAllCallbacks()},s.triggerAnimation=function(){this.startGuideAnimation()},n}(h)).prototype,"instructionsNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=n(b.prototype,"backpackNode",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=n(b.prototype,"handCursor",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=n(b.prototype,"weaponIcon",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=n(b.prototype,"animationDuration",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),P=n(b.prototype,"clickDelay",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),W=n(b.prototype,"dragDelay",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),N=n(b.prototype,"dropDelay",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),w=b))||w));s._RF.pop()}}}));

System.register("chunks:///_virtual/Enemy.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./EnemyManager.ts"],(function(e){var i,t,n,a,o,r,s,l,h,c,u,d,p,f,m,y,g;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,s=e.Prefab,l=e.AudioClip,h=e.Animation,c=e.find,u=e.tween,d=e.UIOpacity,p=e.instantiate,f=e.Vec3,m=e.Component},function(e){y=e.AudioManager},function(e){g=e.EnemyManager}],execute:function(){var b,v,E,D,_,C,w,A,M,S;o._RF.push({},"525b84Qt25I4JE9JatFaINp","Enemy",void 0);var P=r.ccclass,T=r.property;e("Enemy",(b=P("Enemy"),v=T(s),E=T(l),b((C=i((_=function(e){function i(){for(var i,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return i=e.call.apply(e,[this].concat(o))||this,n(i,"enemyType",C,a(i)),n(i,"health",w,a(i)),n(i,"speed",A,a(i)),n(i,"dieEffectPrefab",M,a(i)),n(i,"dieSound",S,a(i)),i.audioManager=null,i.animation=null,i.isDead=!1,i.originalHealth=1,i}t(i,e);var o=i.prototype;return o.start=function(){this.originalHealth=this.health,this.animation=this.getComponent(h);var e=c("Canvas/AudioManager");e&&(this.audioManager=e.getComponent(y)),this.playIdleAnimation()},o.playIdleAnimation=function(){if(this.animation){var e="";switch(this.enemyType){case"child1":e="child_enermy_1";break;case"child2":e="child_enermy_2";break;case"boss":e="boss"}e&&this.animation.getState(e)&&this.animation.play(e)}},o.takeDamage=function(e){return void 0===e&&(e=1),!this.isDead&&(this.health-=e,this.playDamageEffect(),this.health<=0&&(this.die(),!0))},o.playDamageEffect=function(){var e=this.getComponent("cc.Sprite");if(e){var i=e.color.clone();e.color={r:255,g:0,b:0,a:255},u(e).to(.1,{color:i}).start()}},o.die=function(){var e=this;if(!this.isDead){this.isDead=!0;var i=c("Canvas/EnemyManager");if(i){var t=i.getComponent(g);t&&t.removeEnemyFromStoppedList&&t.removeEnemyFromStoppedList(this.node)}this.playDieAnimation(),this.playDieSound(),this.spawnDieEffect(),setTimeout((function(){e.node&&e.node.isValid&&e.node.destroy()}),1e3)}},o.playDieAnimation=function(){if(this.animation){var e="";switch(this.enemyType){case"child1":e="child_enermy_1_die";break;case"child2":e="child_enermy_2_die";break;case"boss":e="boss_die"}e&&this.animation.getState(e)&&this.animation.play(e)}var i=this.getComponent(d);i||(i=this.addComponent(d)),u(i).to(.8,{opacity:0}).start()},o.playDieSound=function(){this.audioManager&&this.audioManager.playEnemyDieSound()},o.spawnDieEffect=function(){if(this.dieEffectPrefab){var e=p(this.dieEffectPrefab);e.setPosition(this.node.getWorldPosition());var i=c("Canvas");i&&(i.addChild(e),setTimeout((function(){e&&e.isValid&&e.destroy()}),2e3))}},o.reset=function(){this.health=this.originalHealth,this.isDead=!1;var e=this.getComponent(d);e&&(e.opacity=255),this.node.setScale(new f(1,1,1)),this.playIdleAnimation()},o.getHealth=function(){return this.health},o.getMaxHealth=function(){return this.originalHealth},o.isAlive=function(){return!this.isDead&&this.health>0},o.getEnemyType=function(){return this.enemyType},i}(m)).prototype,"enemyType",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"child1"}}),w=i(_.prototype,"health",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),A=i(_.prototype,"speed",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),M=i(_.prototype,"dieEffectPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=i(_.prototype,"dieSound",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=_))||D));o._RF.pop()}}}));

System.register("chunks:///_virtual/EnemyManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./Enemy.ts"],(function(e){var t,n,o,i,a,r,s,c,l,p,h,u,d,y,m,f,w,g,b,S,v,E;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,a=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,s=e._decorator,c=e.Prefab,l=e.SpriteFrame,p=e.find,h=e.instantiate,u=e.Vec3,d=e.Node,y=e.Sprite,m=e.UIOpacity,f=e.tween,w=e.Color,g=e.Graphics,b=e.Label,S=e.Component},function(e){v=e.AudioManager},function(e){E=e.Enemy}],execute:function(){var C,P,M,B,W,x,z,T,H,A,R,I,F,k,N,D,Y,X,O,V,L,G,_,q;r._RF.push({},"327c1iE75FJV61iihXL+P3g","EnemyManager",void 0);var U=s.ccclass,j=s.property;e("EnemyManager",(C=U("EnemyManager"),P=j(c),M=j(c),B=j(c),W=j(l),C((T=t((z=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,o(t,"childEnemy1Prefab",T,i(t)),o(t,"childEnemy2Prefab",H,i(t)),o(t,"bossPrefab",A,i(t)),o(t,"warningSpriteFrame",R,i(t)),o(t,"enemySpeed",I,i(t)),o(t,"spawnY",F,i(t)),o(t,"screenWidth",k,i(t)),o(t,"heroX",N,i(t)),o(t,"enemySpawnX",D,i(t)),o(t,"totalSmallEnemies",Y,i(t)),o(t,"bossSpawnDelay",X,i(t)),o(t,"formationSpacing",O,i(t)),o(t,"formationRows",V,i(t)),o(t,"formationCols",L,i(t)),o(t,"pathCurve",G,i(t)),o(t,"enemyStopSpacing",_,i(t)),o(t,"enemyStopDelay",q,i(t)),t.audioManager=null,t.heroWeaponThrower=null,t.isSpawning=!1,t.bossSpawned=!1,t.bossSpeedBoosted=!1,t.currentWave=0,t.enemiesInWave=0,t.maxEnemiesPerWave=8,t.stoppedEnemies=[],t.enemySpawnIndex=0,t}n(t,e);var r=t.prototype;return r.start=function(){var e=p("Canvas/AudioManager");e&&(this.audioManager=e.getComponent(v));var t=p("Canvas/HeroIdle");t&&(this.heroWeaponThrower=t.getComponent("HeroWeaponThrower"))},r.startSpawning=function(){this.isSpawning=!0,this.spawnWave()},r.stopSpawning=function(){this.isSpawning=!1},r.spawnWave=function(){var e=this;this.isSpawning&&(this.currentWave++,this.enemiesInWave=0,this.spawnAllSmallEnemies(),this.bossSpawned||setTimeout((function(){e.showBossWarning()}),1e3*this.bossSpawnDelay))},r.spawnAllSmallEnemies=function(){var e=this;this.stoppedEnemies=[],this.enemySpawnIndex=0;for(var t=function(t){setTimeout((function(){e.spawnEnemyOnPath(t)}),t*(1e3*e.enemyStopDelay))},n=0;n<this.totalSmallEnemies;n++)t(n)},r.spawnEnemyOnPath=function(e){var t=Math.random()<.5?this.childEnemy1Prefab:this.childEnemy2Prefab;if(t){var n=h(t),o=this.enemySpawnX,i=this.spawnY+300*Math.random()-150,a=o+50*(Math.random()-.5);n.setPosition(new u(a,i,0)),this.node.addChild(n),this.playSpawnEffect(n),this.moveEnemyToCenter(n)}else console.error("[EnemyManager] No prefab available!")},r.spawnEnemyInFormation=function(e,t){var n=this.childEnemy1Prefab;if(n=0===e&&(0===t||2===t)?this.childEnemy2Prefab:this.childEnemy1Prefab){var o=h(n),i=this.calculatePathPosition(e,t);o.setPosition(new u(i.x,i.y,0)),this.node.addChild(o),this.playSpawnEffect(o),this.moveEnemyToRight(o)}else console.error("[EnemyManager] No prefab available!")},r.calculatePathPosition=function(e,t){var n=this.enemySpawnX,o=this.spawnY+150,i=this.spawnY-100,a=(e*this.formationCols+t)/(this.formationRows*this.formationCols),r=n+(0-n)*a+80*Math.sin(a*Math.PI);return new u(r+15*(t-1),o+(i-o)*a,0)},r.spawnRandomChildEnemy=function(){var e=Math.random()<.5?this.childEnemy1Prefab:this.childEnemy2Prefab;if(e){var t=h(e),n=this.enemySpawnX;t.setPosition(new u(n,this.spawnY,0)),this.node.addChild(t),this.playSpawnEffect(t),this.moveEnemyToRight(t),this.audioManager&&this.audioManager.playWeaponSpawnSound()}else console.error("[EnemyManager] No prefab available!")},r.showBossWarning=function(){var e=this;this.heroWeaponThrower&&this.heroWeaponThrower.boostSpeedForBossWarning(),this.boostBossSpeed();var t=new d("BossWarning");if(t.setPosition(new u(0,0,0)),this.node.addChild(t),this.warningSpriteFrame){t.addComponent(y).spriteFrame=this.warningSpriteFrame,this.createRedBorder(t),this.createScreenCornerBorders(),t.setScale(new u(.1,.1,1));var n=t.addComponent(m);n.opacity=0,f(t).to(.2,{scale:new u(1.5,1.5,1)}).to(.1,{scale:new u(1,1,1)}).start(),f(n).to(.2,{opacity:255}).to(.2,{opacity:0}).to(.2,{opacity:255}).to(.2,{opacity:0}).to(.2,{opacity:255}).to(.2,{opacity:0}).to(.2,{opacity:255}).to(.2,{opacity:0}).to(.2,{opacity:255}).call((function(){f(t).to(.3,{scale:new u(1.5,1.5,1)}).start(),f(n).to(.3,{opacity:0}).call((function(){t.destroy(),e.spawnBoss()})).start()})).start()}else this.createSimpleWarning(t);this.audioManager&&(this.audioManager.playAlertSound(),this.scheduleOnce((function(){e.audioManager&&e.audioManager.stopAlertSound()}),5))},r.createRedBorder=function(e){var t=new d("RedBorder");t.setPosition(new u(0,0,0)),e.addChild(t),t.addComponent(y).color=new w(255,0,0,255),t.setScale(new u(1.1,1.1,1));var n=t.addComponent(m);n.opacity=0,f(n).to(.2,{opacity:255}).to(.2,{opacity:0}).to(.2,{opacity:255}).to(.2,{opacity:0}).to(.2,{opacity:255}).to(.2,{opacity:0}).to(.2,{opacity:255}).to(.2,{opacity:0}).to(.2,{opacity:255}).call((function(){f(n).to(.3,{opacity:0}).start()})).start()},r.createScreenCornerBorders=function(){var e=this;[{x:-400,y:700},{x:400,y:700},{x:-400,y:-700},{x:400,y:-700}].forEach((function(t,n){var o=new d("CornerBorder_"+n);o.setPosition(new u(t.x,t.y,0)),e.node.addChild(o);var i=o.addComponent(g);i.fillColor=new w(255,0,0,255),i.rect(-50,-50,100,100),i.fill(),o.setScale(new u(1,1,1));var a=o.addComponent(m);a.opacity=255,f(a).to(.2,{opacity:0}).to(.2,{opacity:255}).to(.2,{opacity:0}).to(.2,{opacity:255}).to(.2,{opacity:0}).to(.2,{opacity:255}).to(.2,{opacity:0}).to(.2,{opacity:255}).to(.2,{opacity:0}).call((function(){f(a).to(.3,{opacity:0}).call((function(){o.destroy()})).start()})).start()}))},r.createRedBackground=function(e){var t=new d("RedBackground");t.setPosition(new u(0,0,0)),e.addChild(t),t.addComponent(y).color=new w(255,0,0,100),t.setScale(new u(10,10,1));var n=t.addComponent(m);n.opacity=0,f(n).to(.2,{opacity:100}).to(.2,{opacity:0}).to(.2,{opacity:100}).to(.2,{opacity:0}).to(.2,{opacity:100}).to(.2,{opacity:0}).to(.2,{opacity:100}).to(.2,{opacity:0}).to(.2,{opacity:100}).call((function(){f(n).to(.3,{opacity:0}).start()})).start()},r.createWarningText=function(e){var t=this,n=new d("WarningText");n.setPosition(new u(0,0,0)),e.addChild(n);var o=n.addComponent(b);o.string="WARNING",o.fontSize=80,o.color=new w(255,255,255,255),o.horizontalAlign=b.HorizontalAlign.CENTER,o.verticalAlign=b.VerticalAlign.CENTER,n.setScale(new u(.1,.1,1));var i=n.addComponent(m);i.opacity=0,f(n).to(.2,{scale:new u(1.2,1.2,1)}).to(.1,{scale:new u(1,1,1)}).start(),f(i).to(.2,{opacity:255}).to(.2,{opacity:0}).to(.2,{opacity:255}).to(.2,{opacity:0}).to(.2,{opacity:255}).to(.2,{opacity:0}).to(.2,{opacity:255}).to(.2,{opacity:0}).to(.2,{opacity:255}).call((function(){f(i).to(.3,{opacity:0}).call((function(){e.destroy(),t.spawnBoss()})).start()})).start()},r.createSimpleWarning=function(e){var t=this,n=e.addComponent(m);n.opacity=0,e.setScale(new u(.1,.1,1)),f(e).to(.2,{scale:new u(1.5,1.5,1)}).to(.1,{scale:new u(1,1,1)}).start(),f(n).to(.2,{opacity:255}).to(.2,{opacity:0}).to(.2,{opacity:255}).to(.2,{opacity:0}).to(.2,{opacity:255}).to(.2,{opacity:0}).to(.2,{opacity:255}).to(.2,{opacity:0}).to(.2,{opacity:255}).call((function(){f(e).to(.3,{scale:new u(1.5,1.5,1)}).start(),f(n).to(.3,{opacity:0}).call((function(){e.destroy(),t.spawnBoss()})).start()})).start()},r.spawnBoss=function(){if(this.bossPrefab&&!this.bossSpawned){this.bossSpawned=!0;var e=h(this.bossPrefab),t=this.enemySpawnX+50*(Math.random()-.5),n=this.spawnY+300*Math.random()-150;e.setPosition(new u(t,n,0)),this.node.addChild(e),this.audioManager&&this.audioManager.stopAlertSound(),this.playBossSpawnEffect(e),this.moveBossToCenter(e)}},r.playSpawnEffect=function(e){e.setScale(new u(.5,.5,1));var t=e.getComponent(m);t||(t=e.addComponent(m)),t.opacity=0,f(e).to(.3,{scale:new u(1,1,1)}).start(),f(t).to(.3,{opacity:255}).start()},r.playBossSpawnEffect=function(e){e.setScale(new u(.3,.3,1));var t=e.getComponent(m);t||(t=e.addComponent(m)),t.opacity=0,f(e).to(.5,{scale:new u(1.2,1.2,1)}).to(.2,{scale:new u(1,1,1)}).start(),f(t).to(.5,{opacity:255}).start()},r.moveEnemyToRight=function(e){var t=this,n=e.getPosition(),o=this.getHeroPosition().x,i=n.y,a=Math.abs(o-n.x)/this.enemySpeed;f(e).to(a,{position:new u(o,i,0)},{easing:"linear"}).call((function(){e&&e.isValid&&t.attackHero(e)})).start()},r.moveEnemyToCenter=function(e){var t=this,n=e.getPosition(),o=this.spawnY,i=this.stoppedEnemies.length,a=0+(i%4-1.5)*this.enemyStopSpacing,r=o+(i%2==0?0:20),s=Math.sqrt(Math.pow(a-n.x,2)+Math.pow(r-n.y,2))/(.6*this.enemySpeed);f(e).to(s,{position:new u(a,r,0)},{easing:"quadOut"}).call((function(){t.stoppedEnemies.push(e)})).start()},r.getHeroPosition=function(){var e=p("Canvas/HeroIdle");if(e)return e.getWorldPosition();if(e||(e=p("Canvas/Hero")),e||(e=p("Canvas/Game/Hero")),e||(e=p("Canvas/GameScene/Hero")),!e){var t=p("Canvas");if(t)for(var n,o=a(t.children);!(n=o()).done;){var i=n.value;if(i.name.toLowerCase().includes("hero")||i.name.toLowerCase().includes("player")){e=i;break}}}return e?e.getWorldPosition():new u(this.heroX,this.spawnY,0)},r.boostBossSpeed=function(){this.bossSpeedBoosted||(this.bossSpeedBoosted=!0)},r.getBossSpeed=function(){var e=.4*this.enemySpeed;return this.bossSpeedBoosted?2*e:e},r.moveBossToRight=function(e){var t=this,n=e.getPosition(),o=this.getHeroPosition().x,i=n.y,a=Math.abs(o-n.x)/this.getBossSpeed();f(e).to(a,{position:new u(o,i,0)},{easing:"linear"}).call((function(){e&&e.isValid&&t.attackHero(e)})).start()},r.moveBossToCenter=function(e){var t=e.getPosition(),n=this.spawnY,o=Math.sqrt(Math.pow(0-t.x,2)+Math.pow(n-t.y,2))/this.getBossSpeed();f(e).to(o,{position:new u(0,n,0)},{easing:"quadOut"}).call((function(){})).start()},r.attackHero=function(e){this.createEnemyAttackEffect(e),this.audioManager&&this.audioManager.playAttackMergedSound(),e&&e.isValid&&e.destroy()},r.isEnemyNearHero=function(e){var t=e.getWorldPosition(),n=this.getHeroPosition();return u.distance(t,n)<=50},r.createEnemyAttackEffect=function(e){var t=new d("EnemyAttackEffect");t.setPosition(e.getPosition()),this.node.addChild(t);var n=t.getComponent(m);n||(n=t.addComponent(m)),f(n).to(.5,{opacity:0}).call((function(){t&&t.isValid&&t.destroy()})).start()},r.removeEnemyFromStoppedList=function(e){var t=this.stoppedEnemies.indexOf(e);t>-1&&this.stoppedEnemies.splice(t,1)},r.resetSpawning=function(){var e=this;this.isSpawning=!1,this.bossSpawned=!1,this.currentWave=0,this.enemiesInWave=0,this.stoppedEnemies=[],this.enemySpawnIndex=0,this.node.children.forEach((function(e){e&&e.isValid&&e.destroy()})),setTimeout((function(){e.startSpawning()}),1e3)},r.pauseSpawning=function(){this.isSpawning=!1},r.resumeSpawning=function(){this.isSpawning||this.startSpawning()},r.getCurrentWave=function(){return this.currentWave},r.isBossSpawned=function(){return this.bossSpawned},r.update=function(e){this.checkEnemiesNearHero()},r.checkEnemiesNearHero=function(){var e=this;this.node.children.forEach((function(t){if(t&&t.isValid){var n=t.getComponent(E);n&&n.isAlive()&&e.isEnemyNearHero(t)&&e.attackHero(t)}}))},r.debugEnemyConfig=function(){console.log("=== ENEMY CONFIG DEBUG ==="),console.log("Total small enemies: "+this.totalSmallEnemies),console.log("Formation rows: "+this.formationRows),console.log("Formation cols: "+this.formationCols),console.log("Max enemies per wave: "+this.maxEnemiesPerWave),console.log("Enemy stop delay: "+this.enemyStopDelay+"s"),console.log("Boss spawn delay: "+this.bossSpawnDelay+"s"),console.log("Current wave: "+this.currentWave),console.log("Enemies in wave: "+this.enemiesInWave),console.log("Is spawning: "+this.isSpawning),console.log("Boss spawned: "+this.bossSpawned),console.log("===========================")},r.triggerEnemyConfigDebug=function(){this.debugEnemyConfig()},t}(S)).prototype,"childEnemy1Prefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(z.prototype,"childEnemy2Prefab",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(z.prototype,"bossPrefab",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(z.prototype,"warningSpriteFrame",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(z.prototype,"enemySpeed",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),F=t(z.prototype,"spawnY",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k=t(z.prototype,"screenWidth",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 800}}),N=t(z.prototype,"heroX",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-200}}),D=t(z.prototype,"enemySpawnX",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 200}}),Y=t(z.prototype,"totalSmallEnemies",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),X=t(z.prototype,"bossSpawnDelay",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),O=t(z.prototype,"formationSpacing",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 60}}),V=t(z.prototype,"formationRows",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),L=t(z.prototype,"formationCols",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4}}),G=t(z.prototype,"pathCurve",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),_=t(z.prototype,"enemyStopSpacing",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),q=t(z.prototype,"enemyStopDelay",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),x=z))||x));r._RF.pop()}}}));

System.register("chunks:///_virtual/EnemyTag.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,r,i,a,o,c;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,c=e.Component}],execute:function(){var l,s,u,p,y;a._RF.push({},"4e9fdB8fXxFsZnLkRip0HCC","EnemyTag",void 0);var g=o.ccclass,f=o.property;e("EnemyTag",(l=g("EnemyTag"),s=f({tooltip:"Tag của đối tượng, mặc định là Enemy"}),l((y=n((p=function(e){function n(){for(var n,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return n=e.call.apply(e,[this].concat(a))||this,r(n,"tag",y,i(n)),n}return t(n,e),n}(c)).prototype,"tag",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Enemy"}}),u=p))||u));a._RF.pop()}}}));

System.register("chunks:///_virtual/HeroWeaponThrower.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts"],(function(e){var o,n,a,i,t,r,s,l,c,h,d,p,u,f,w,m,g,v,b,W;return{setters:[function(e){o=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized,t=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,s=e._decorator,l=e.Prefab,c=e.Node,h=e.find,d=e.instantiate,p=e.Vec3,u=e.director,f=e.Collider2D,w=e.Contact2DType,m=e.resources,g=e.tween,v=e.UIOpacity,b=e.Component},function(e){W=e.AudioManager}],execute:function(){var y,S,T,H,C,P,D,E,M,k,I,R,A,B,V,N,F,z,O,_,x,L,U,G,j;r._RF.push({},"de766cgD6JOqavjU0yjeonJ","HeroWeaponThrower",void 0);var X=s.ccclass,q=s.property;e("HeroWeaponThrower",(y=X("HeroWeaponThrower"),S=q([l]),T=q(c),H=q([Number]),C=q([Number]),P=q([Number]),D=q(l),E=q(l),M=q(l),y((R=o((I=function(e){function o(){for(var o,n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return o=e.call.apply(e,[this].concat(t))||this,a(o,"weaponPrefabs",R,i(o)),a(o,"heroWeaponThrower",A,i(o)),a(o,"throwSpeed",B,i(o)),a(o,"throwRange",V,i(o)),a(o,"throwInterval",N,i(o)),a(o,"weaponLifetime",F,i(o)),a(o,"gravity",z,i(o)),a(o,"minEnemyDistanceToStartShooting",O,i(o)),a(o,"weaponScales",_,i(o)),a(o,"weaponWidths",x,i(o)),a(o,"weaponHeights",L,i(o)),a(o,"childEnemy1DiePrefab",U,i(o)),a(o,"childEnemy2DiePrefab",G,i(o)),a(o,"bossDiePrefab",j,i(o)),o.bossHealth=new Map,o.BOSS_MAX_HEALTH=12,o.isSpamming=!1,o.timer=0,o.activeWeapons=[],o.speedBoosted=!1,o.gameStartTime=0,o.gameEnded=!1,o.resetTimer=0,o.shouldResetAfterReward=!1,o}n(o,e);var r=o.prototype;return r.destroyAllDiePrefabs=function(){var e=h("Canvas/EnemyManager");if(e)for(var o=e.children.length-1;o>=0;o--){var n=e.children[o];n&&n.isValid&&(n.name.includes("Die")||n.name.includes("_Die"))&&n.destroy()}},r.setHeroState=function(e){var o=h("Canvas/HeroAttack"),n=h("Canvas/HeroIdle");o&&(o.active=e),n&&(n.active=!e)},r.start=function(){this.gameStartTime=Date.now(),this.validateDiePrefabs(),this.setHeroState(!1),this.schedule(this.checkAndStartSpam,.5),this.schedule(this.forceCheckAndStop,.5)},r.testDiePrefabCreation=function(){if(this.childEnemy1DiePrefab){var e=d(this.childEnemy1DiePrefab);e&&(e.setWorldPosition(new p(0,0,0)),this.node.parent.addChild(e),this.scheduleOnce((function(){e&&e.isValid&&e.destroy()}),3))}if(this.childEnemy2DiePrefab){var o=d(this.childEnemy2DiePrefab);o&&(o.setWorldPosition(new p(100,0,0)),this.node.parent.addChild(o),this.scheduleOnce((function(){o&&o.isValid&&o.destroy()}),3))}if(this.bossDiePrefab){var n=d(this.bossDiePrefab);n&&(n.setWorldPosition(new p(-100,0,0)),this.node.parent.addChild(n),this.scheduleOnce((function(){n&&n.isValid&&n.destroy()}),3))}},r.boostSpeedForBossWarning=function(){this.speedBoosted||(this.speedBoosted=!0,this.throwSpeed*=2,this.throwRange=200)},r.checkAndStartSpam=function(){var e=this.hasEnemiesInScene();e&&!this.isSpamming?this.startSpammingWeapons():!e&&this.isSpamming&&this.stopSpammingWeapons()},r.startSpammingWeapons=function(){this.isSpamming||(this.isSpamming=!0,this.timer=0,this.setHeroState(!0),this.throwAllWeapons())},r.stopSpammingWeapons=function(){this.isSpamming&&(this.isSpamming=!1,this.timer=0,this.setHeroState(!1),this.activeWeapons.forEach((function(e){e&&e.isValid&&e.destroy()})),this.activeWeapons=[])},r.forceStopShooting=function(){this.isSpamming=!1,this.timer=0,this.setHeroState(!1),this.activeWeapons.forEach((function(e){e&&e.isValid&&e.destroy()})),this.activeWeapons=[]},r.forceStartShooting=function(){this.startSpammingWeapons()},r.hasEnemiesInScene=function(){if(this.gameEnded)return!1;var e=this.getEnemiesInScene().filter((function(e){if(!e||!e.isValid||!e.active)return!1;if(e.name.includes("Die")||e.name.includes("_Die"))return!1;var o=e.getComponent("cc.Collider2D");return!(o&&!o.enabled)}));if(e.length>0)for(var o,n=this.getHeroPosition(),a=t(e);!(o=a()).done;){var i=o.value.getWorldPosition();if(p.distance(n,i)<=this.minEnemyDistanceToStartShooting)return!0}return!1},r.update=function(e){if(!this.gameEnded){var o=this.hasEnemiesInScene();o&&!this.isSpamming?this.startSpammingWeapons():!o&&this.isSpamming&&this.stopSpammingWeapons(),this.isSpamming&&(this.timer+=e,this.timer>=this.throwInterval&&(this.timer=0,this.throwAllWeapons())),this.checkWeaponEnemyCollision()}},r.forceCheckAndStop=function(){var e=this.hasEnemiesInScene();!e&&this.isSpamming?this.forceStopShooting():e&&!this.isSpamming&&this.forceStartShooting()},r.checkWeaponEnemyCollision=function(){for(var e=this.activeWeapons.length-1;e>=0;e--){var o=this.activeWeapons[e];if(o&&o.isValid){for(var n,a=o.getWorldPosition(),i=this.getEnemiesInScene(),r=null,s=1/0,l=t(i);!(n=l()).done;){var c=n.value;if(c&&c.isValid&&c.active&&(!c.name.includes("Die")&&!c.name.includes("_Die"))){var h=c.getComponent("cc.Collider2D");if(!h||h.enabled){var d=c.getWorldPosition(),u=p.distance(a,d);u<s&&(s=u,r=c)}}}r&&s<120&&(this.isBoss(r)?this.handleBossHit(r):this.replaceEnemyWithDiePrefab(r,r.name),this.destroyWeapon(o))}}},r.getEnemiesInScene=function(){var e=[];if(!u.getScene())return e;var o=h("Canvas/EnemyManager");return o&&o.children.forEach((function(o){if(o&&o.isValid&&o.active){var n=o.getWorldPosition();n.x>-1e3&&n.x<1e3&&n.y>-1e3&&n.y<1e3&&e.push(o)}})),e},r.throwAllWeapons=function(){var e=this;if(!this.gameEnded&&this.hasEnemiesInScene())for(var o=function(o){e.scheduleOnce((function(){e.spawnWeaponByIndex(o)}),.8*o)},n=0;n<this.weaponPrefabs.length;n++)o(n)},r.spawnWeaponByIndex=function(e){if(this.weaponPrefabs[e])if(this.heroWeaponThrower&&this.heroWeaponThrower.isValid){var o=d(this.weaponPrefabs[e]);if(o){var n,a=h("Canvas/HeroIdle");n=a&&a.isValid?a.getWorldPosition():this.heroWeaponThrower.getWorldPosition();var i=new p(n.x,n.y,n.z);o.setWorldPosition(i);var t=this.weaponScales[e]||1;o.setScale(t,t,t);var r=this.weaponWidths[e]||100,s=this.weaponHeights[e]||100,l=o.getComponent("cc.UITransform");l&&l.setContentSize(r,s),o.active=!0,this.node.parent.addChild(o),this.activeWeapons.push(o),this.setupWeaponCollision(o),this.startWeaponMovement(o,e,i)}else console.warn("[HeroWeaponThrower] Failed to instantiate weapon "+e)}else console.warn("[HeroWeaponThrower] heroWeaponThrower is invalid");else console.warn("[HeroWeaponThrower] Weapon prefab at index "+e+" is null")},r.setupWeaponCollision=function(e){var o=e.getComponent(f);o&&o.on(w.BEGIN_CONTACT,this.onWeaponCollision,this)},r.onWeaponCollision=function(e,o,n){var a=e.node,i=o.node;i.name.includes("Die")||i.name.includes("_Die")||o.enabled&&(this.isBoss(i)?this.handleBossHit(i):this.replaceEnemyWithDiePrefab(i,i.name),this.destroyWeapon(a))},r.replaceEnemyWithDiePrefab=function(e,o){e.getWorldPosition(),e.parent;var n=null;if(o.includes("child_enemy_1")||o.includes("ChildEnermy1")?n=this.childEnemy1DiePrefab:o.includes("child_enemy_2")||o.includes("ChildEnermy2")?n=this.childEnemy2DiePrefab:(o.includes("boss")||o.includes("Boss"))&&(n=this.bossDiePrefab),n){var a=d(n);if(a){var i=e.position;a.position=i,e.parent.addChild(a),a.active=!0;var t=a.getComponent("cc.Collider2D");t&&(t.enabled=!1),a.name=a.name+"_Die";var r=a.getComponent("cc.Animation");r&&r.play(),e.destroy(),this.playEnemyDieSound(),this.scheduleOnce((function(){a&&a.isValid&&a.destroy()}),1),setTimeout((function(){a&&a.isValid&&a.destroy()}),2e3)}else console.warn("[HeroWeaponThrower] Failed to instantiate die prefab")}else console.warn("[HeroWeaponThrower] Die prefab not found for "+o)},r.validateDiePrefabs=function(){this.childEnemy1DiePrefab||(this.childEnemy1DiePrefab=this.loadDiePrefab("ChildEnermy1Die")),this.childEnemy2DiePrefab||(this.childEnemy2DiePrefab=this.loadDiePrefab("ChildEnermy2Die")),this.bossDiePrefab||(this.bossDiePrefab=this.loadDiePrefab("BossDie")),this.childEnemy1DiePrefab&&this.childEnemy2DiePrefab&&this.bossDiePrefab||(console.warn("[HeroWeaponThrower] WARNING: Some die prefabs could not be loaded!"),console.warn("[HeroWeaponThrower] Please assign the following prefabs in the Inspector:"),this.childEnemy1DiePrefab||console.warn("[HeroWeaponThrower] - ChildEnermy1Die.prefab"),this.childEnemy2DiePrefab||console.warn("[HeroWeaponThrower] - ChildEnermy2Die.prefab"),this.bossDiePrefab||console.warn("[HeroWeaponThrower] - BossDie.prefab"))},r.loadDiePrefab=function(e){try{var o="Prefabs/"+e;return m.get(o)}catch(o){return console.warn("[HeroWeaponThrower] Could not load die prefab: "+e),null}},r.findDiePrefab=function(e){var o="Prefabs/"+e;try{return m.get(o)}catch(e){return console.warn("[HeroWeaponThrower] Could not load die prefab: "+o),null}},r.startWeaponMovement=function(e,o,n){var a=this;switch(o){case 0:this.startParabolicMovement(e,n,150);break;case 1:this.startStraightMovement(e,n,new p(1,0,0));break;case 2:this.startParabolicMovement(e,n,100);break;case 3:this.startParabolicMovement(e,n,250);break;default:this.startStraightMovement(e,n,new p(1,0,0))}this.scheduleOnce((function(){a.destroyWeapon(e)}),this.weaponLifetime)},r.startParabolicMovement=function(e,o,n){var a=this;void 0===n&&(n=300);var i=this.getDistanceToNearestEnemy(),t=i/this.throwSpeed,r=new p(o.x+i,o.y,o.z);g(e).to(t,{worldPosition:r},{easing:"quadOut",onUpdate:function(e,a){var t=o.x+i*a,r=o.y+n*Math.sin(a*Math.PI);e.setWorldPosition(new p(t,r,o.z));var s=360*a;e.setRotationFromEuler(0,0,s)}}).call((function(){a.destroyWeapon(e)})).start()},r.startStraightMovement=function(e,o,n){var a=this,i=this.getDistanceToNearestEnemy(),t=new p(o.x+i,o.y,o.z),r=i/this.throwSpeed;g(e).to(r,{worldPosition:t},{easing:"linear",onUpdate:function(e,n){var a=o.x+i*n,t=o.y;e.setWorldPosition(new p(a,t,o.z))}}).call((function(){a.destroyWeapon(e)})).start()},r.startDiagonalMovement=function(e,o,n){var a=n*Math.PI/180,i=new p(Math.cos(a),Math.sin(a),0);this.startStraightMovement(e,o,i)},r.destroyWeapon=function(e){if(e&&e.isValid){var o=this.activeWeapons.indexOf(e);o>-1&&this.activeWeapons.splice(o,1),e.destroy()}},r.isSpammingWeapons=function(){return this.isSpamming},r.startSpamming=function(){this.startSpammingWeapons()},r.stopSpamming=function(){this.stopSpammingWeapons()},r.debugSystemStatus=function(){this.hasEnemiesInScene()&&this.getEnemiesInScene().forEach((function(e,o){}))},r.triggerDebug=function(){this.debugSystemStatus()},r.debugPositions=function(){var e=h("Canvas/HeroIdle");if(e&&e.isValid)e.getWorldPosition();if(this.heroWeaponThrower&&this.heroWeaponThrower.isValid)this.heroWeaponThrower.getWorldPosition();this.getEnemiesInScene().forEach((function(e,o){if(e&&e.isValid&&e.active)e.getWorldPosition()}))},r.triggerPositionDebug=function(){this.debugPositions()},r.debugEnemyStatus=function(){if(u.getScene()){var e=h("Canvas/EnemyManager");e&&e.children.forEach((function(e,o){if(e&&e.isValid&&e.active){var n=e.getWorldPosition();n.x>-1e3&&n.x<1e3&&n.y>-1e3&&n.y}}))}},r.triggerEnemyStatusDebug=function(){this.debugEnemyStatus()},r.findNearestEnemy=function(){var e,o=this.getEnemiesInScene(),n=null,a=1/0,i=h("Canvas/HeroIdle");e=i&&i.isValid?i.getWorldPosition():this.heroWeaponThrower.getWorldPosition();for(var r,s=t(o);!(r=s()).done;){var l=r.value;if(l&&l.isValid&&l.active){var c=l.getWorldPosition(),d=p.distance(e,c);d<a&&(a=d,n=l)}}return n},r.isBoss=function(e){return e&&e.isValid&&(e.name.includes("boss")||e.name.includes("Boss"))},r.hasChildEnemies=function(){for(var e,o=this.getEnemiesInScene(),n=0,a=t(o);!(e=a()).done;){var i=e.value;i&&i.isValid&&!this.isBoss(i)&&n++}return n>0},r.hasBoss=function(){for(var e,o=this.getEnemiesInScene(),n=0,a=t(o);!(e=a()).done;){var i=e.value;i&&i.isValid&&this.isBoss(i)&&n++}return n>0},r.getDistanceToNearestEnemy=function(){var e,o=this.findNearestEnemy();if(!o||!o.isValid)return this.throwRange;var n=h("Canvas/HeroIdle");e=n&&n.isValid?n.getWorldPosition():this.heroWeaponThrower.getWorldPosition();var a=o.getWorldPosition(),i=p.distance(e,a);return Math.max(i,200)},r.handleBossHit=function(e){var o=this,n=e.uuid,a=(this.bossHealth.get(n)||this.BOSS_MAX_HEALTH)-1;a<=0?(console.log("[HeroWeaponThrower] Boss died! Health:",a),this.forceStopShooting(),this.gameEnded=!0,this.replaceEnemyWithDiePrefab(e,e.name),this.bossHealth.delete(n),console.log("[HeroWeaponThrower] Scheduled Reward node to show in 0.5s"),setTimeout((function(){console.log("[HeroWeaponThrower] 0.5s passed, showing Reward node..."),o.showRewardNode()}),500)):this.bossHealth.set(n,a)},r.initializeBossHealth=function(e){var o=e.uuid;this.bossHealth.has(o)||this.bossHealth.set(o,this.BOSS_MAX_HEALTH)},r.onDestroy=function(){this.stopSpammingWeapons(),this.unscheduleAllCallbacks()},r.debugRealTimeStatus=function(){this.hasEnemiesInScene()&&this.getEnemiesInScene().forEach((function(e,o){}))},r.triggerRealTimeDebug=function(){this.debugRealTimeStatus()},r.triggerForceCheck=function(){this.forceCheckAndStop()},r.resetGameState=function(){this.gameEnded=!1,this.isSpamming=!1,this.timer=0,this.bossHealth.clear(),this.speedBoosted=!1,this.setHeroState(!1),this.hideRewardNode(),this.resetRewardShowNode(),this.activeWeapons.forEach((function(e){e&&e.isValid&&e.destroy()})),this.activeWeapons=[]},r.debugGameStatus=function(){this.bossHealth.forEach((function(e,o){}))},r.triggerGameStatusDebug=function(){this.debugGameStatus()},r.testDiePrefab=function(e){var o=null,n=new p(0,0,0);switch(e){case"child1":o=this.childEnemy1DiePrefab,n=new p(0,0,0);break;case"child2":o=this.childEnemy2DiePrefab,n=new p(100,0,0);break;case"boss":o=this.bossDiePrefab,n=new p(-100,0,0)}if(o){var a=d(o);if(a){a.setWorldPosition(n),this.node.parent.addChild(a);var i=a.getComponent("cc.Animation");i&&i.play(),this.scheduleOnce((function(){a&&a.isValid&&a.destroy()}),3)}else console.warn("[HeroWeaponThrower] Failed to instantiate "+e+" die prefab")}else console.warn("[HeroWeaponThrower] "+e+" die prefab is null")},r.testDiePrefabAtCenter=function(e){var o=null;switch(e){case"child1":o=this.childEnemy1DiePrefab;break;case"child2":o=this.childEnemy2DiePrefab;break;case"boss":o=this.bossDiePrefab}if(o){var n=d(o);if(n){n.setWorldPosition(new p(0,0,0)),this.node.parent.addChild(n);n.getComponent("cc.Sprite");var a=n.getComponent("cc.Animation");n.getComponent("cc.UITransform");a&&a.play(),this.scheduleOnce((function(){n&&n.isValid&&n.destroy()}),5)}else console.warn("[HeroWeaponThrower] Failed to instantiate "+e+" die prefab")}else console.warn("[HeroWeaponThrower] "+e+" die prefab is null")},r.testDiePrefabVisible=function(e){var o=null;switch(e){case"child1":o=this.childEnemy1DiePrefab;break;case"child2":o=this.childEnemy2DiePrefab;break;case"boss":o=this.bossDiePrefab}if(o){var n=d(o);if(n){n.setWorldPosition(new p(0,-100,0)),this.node.parent.addChild(n);n.getComponent("cc.Sprite");var a=n.getComponent("cc.Animation");n.getComponent("cc.UITransform");a&&a.play(),this.scheduleOnce((function(){n&&n.isValid&&n.destroy()}),5)}else console.warn("[HeroWeaponThrower] Failed to instantiate "+e+" die prefab")}else console.warn("[HeroWeaponThrower] "+e+" die prefab is null")},r.testDiePrefabAtPosition=function(e,o,n){var a=null;switch(e){case"child1":a=this.childEnemy1DiePrefab;break;case"child2":a=this.childEnemy2DiePrefab;break;case"boss":a=this.bossDiePrefab}if(a){var i=d(a);if(i){i.setWorldPosition(new p(o,n,0)),this.node.parent.addChild(i);i.getComponent("cc.Sprite");var t=i.getComponent("cc.Animation");i.getComponent("cc.UITransform");t&&t.play(),this.scheduleOnce((function(){i&&i.isValid&&i.destroy()}),5)}else console.warn("[HeroWeaponThrower] Failed to instantiate "+e+" die prefab")}else console.warn("[HeroWeaponThrower] "+e+" die prefab is null")},r.testDiePrefabInCameraView=function(e){var o=null;switch(e){case"child1":o=this.childEnemy1DiePrefab;break;case"child2":o=this.childEnemy2DiePrefab;break;case"boss":o=this.bossDiePrefab}if(o){var n=d(o);if(n){n.setWorldPosition(new p(0,0,0)),this.node.parent.addChild(n);n.getComponent("cc.Sprite");var a=n.getComponent("cc.Animation");n.getComponent("cc.UITransform");a&&a.play(),this.scheduleOnce((function(){n&&n.isValid&&n.destroy()}),5)}else console.warn("[HeroWeaponThrower] Failed to instantiate "+e+" die prefab")}else console.warn("[HeroWeaponThrower] "+e+" die prefab is null")},r.testDiePrefabLowPosition=function(e){var o=null;switch(e){case"child1":o=this.childEnemy1DiePrefab;break;case"child2":o=this.childEnemy2DiePrefab;break;case"boss":o=this.bossDiePrefab}if(o){var n=d(o);if(n){n.setWorldPosition(new p(0,-200,0)),this.node.parent.addChild(n);n.getComponent("cc.Sprite");var a=n.getComponent("cc.Animation");n.getComponent("cc.UITransform");a&&a.play(),this.scheduleOnce((function(){n&&n.isValid&&n.destroy()}),5)}else console.warn("[HeroWeaponThrower] Failed to instantiate "+e+" die prefab")}else console.warn("[HeroWeaponThrower] "+e+" die prefab is null")},r.showRewardNode=function(){console.log("[HeroWeaponThrower] showRewardNode() called"),this.stopAlertSound(),this.playVictorySound();var e=h("Canvas/Reward");if(console.log("[HeroWeaponThrower] Looking for Reward node..."),e)console.log("[HeroWeaponThrower] Found Reward node, setting active = true"),e.active=!0,this.addRewardFadeInEffect(e),this.addRewardButtonListener();else{console.warn("[HeroWeaponThrower] Reward Node not found in scene");var o=h("Canvas");o&&(console.log("[HeroWeaponThrower] Canvas children:"),o.children.forEach((function(e,o){console.log("[HeroWeaponThrower] Child "+o+": "+e.name)})))}},r.addRewardButtonListener=function(){var e=h("Canvas/Reward/RewardButton");e&&e.on(c.EventType.TOUCH_START,this.onRewardButtonClick,this)},r.onRewardButtonClick=function(e){var o=h("Canvas/Reward");o&&(o.active=!1),this.showRewardShow();var n=h("Canvas/Reward/RewardButton");n&&n.off(c.EventType.TOUCH_START,this.onRewardButtonClick,this)},r.showRewardShow=function(){var e=this,o=h("Canvas/RewardShow");o?(o.active=!0,this.addRewardFadeInEffect(o),this.playCongratsSound(),console.log("[HeroWeaponThrower] RewardShow displayed, scheduling reset in 2 seconds..."),setTimeout((function(){console.log("[HeroWeaponThrower] setTimeout triggered after 2 seconds"),e.resetToMainMenu()}),2e3)):console.error("[HeroWeaponThrower] RewardShow node not found!")},r.onRewardShowTimerComplete=function(){console.log("[HeroWeaponThrower] 2 seconds passed, resetting to main menu..."),this.shouldResetAfterReward?console.log("[HeroWeaponThrower] Timer already completed, skipping..."):(this.shouldResetAfterReward=!0,this.resetToMainMenu())},r.resetToMainMenu=function(){console.log("[HeroWeaponThrower] Reset về màn hình ban đầu thực sự...");var e=h("Canvas/RewardShow");e&&(e.active=!1,console.log("[HeroWeaponThrower] Hidden RewardShow"));var o=h("Canvas/Reward");o&&(o.active=!1,console.log("[HeroWeaponThrower] Hidden Reward node")),this.resetGameState();["Canvas/MainMenu","Canvas/FightButton","Canvas/EnemyManager","Canvas/WeaponManager"].forEach((function(e){var o=h(e);o&&(o.active=!1)}));var n=h("Canvas/HeroIdle");n&&(n.active=!0,console.log("[HeroWeaponThrower] Showed HeroIdle"));var a=h("Canvas/Backpack");if(a){a.active=!0,console.log("[HeroWeaponThrower] Showed Backpack"),console.log("[HeroWeaponThrower] Clearing weapons from backpack...");for(var i=a.children.length-1;i>=0;i--){var t=a.children[i];if(t&&t.isValid)if(console.log("[HeroWeaponThrower] Checking child:",t.name),t.name.includes("Slot")){console.log("[HeroWeaponThrower] Found slot:",t.name);for(var r=t.children.length-1;r>=0;r--){var s=t.children[r];s&&s.isValid&&(console.log("[HeroWeaponThrower] Destroying weapon in slot:",s.name),s.destroy())}}else t.name.includes("Weapon")&&(console.log("[HeroWeaponThrower] Destroying weapon:",t.name),t.destroy())}console.log("[HeroWeaponThrower] Backpack cleared - slots kept, weapons destroyed!")}var l=h("Canvas/Instructions");l?(l.active=!0,console.log("[HeroWeaponThrower] Showed Instructions (hướng dẫn kéo thả)")):console.warn("[HeroWeaponThrower] Instructions node not found!");var c=h("Canvas/InstructionReset");c?(c.active=!0,console.log("[HeroWeaponThrower] Showed InstructionReset (bàn tay hướng dẫn reset)")):console.warn("[HeroWeaponThrower] InstructionReset node not found!");var d=h("Canvas/PlayNowButton");d&&(d.active=!0,console.log("[HeroWeaponThrower] Showed PlayNowButton")),this.spawnWeaponsUnderBackpack(),this.addMainMenuTouchListener(),console.log("[HeroWeaponThrower] Reset hoàn thành!")},r.spawnWeaponsUnderBackpack=function(){var e=this,o=h("Canvas/Backpack");if(o){for(var n=o.children.length-1;n>=0;n--){var a=o.children[n];if(a&&a.isValid&&a.name.includes("Slot"))for(var i=a.children.length-1;i>=0;i--){var t=a.children[i];t&&t.isValid&&(console.log("[HeroWeaponThrower] Clearing weapon from slot:",t.name),t.destroy())}}console.log("[HeroWeaponThrower] Cleared all weapons from backpack")}var r=h("Canvas/WeaponManager");if(r){r.active=!0;for(var s=r.children.length-1;s>=0;s--){var l=r.children[s];l&&l.isValid&&l.destroy()}[{prefabIndex:0,position:new p(-150,-200,0),width:70,height:70,name:"Dao gấp xanh"},{prefabIndex:1,position:new p(0,-200,0),width:160,height:40,name:"Dao găm vàng"},{prefabIndex:2,position:new p(150,-200,0),width:70,height:220,name:"Kiếm xanh"}].forEach((function(o,n){var a=d(e.weaponPrefabs[o.prefabIndex]);if(a){r.addChild(a),a.setPosition(o.position);var i=a.getComponent("cc.UITransform");i&&i.setContentSize(o.width,o.height),console.log("[HeroWeaponThrower] Spawned initial weapon:",o.name,"at position:",o.position,"with size:",o.width,"x",o.height)}})),console.log("[HeroWeaponThrower] Spawned 3 initial weapons in inventory with proper sizes")}},r.hideGameElements=function(){console.log("[HeroWeaponThrower] Hiding game elements...");var e=h("Canvas/HeroIdle"),o=h("Canvas/HeroAttack");e&&(e.active=!1,console.log("[HeroWeaponThrower] Hidden HeroIdle")),o&&(o.active=!1,console.log("[HeroWeaponThrower] Hidden HeroAttack"));var n=h("Canvas/EnemyManager");n&&(n.active=!1,console.log("[HeroWeaponThrower] Hidden EnemyManager"));var a=h("Canvas/WeaponManager");a&&(a.active=!1,console.log("[HeroWeaponThrower] Hidden WeaponManager"));var i=h("Canvas/Backpack");i&&(i.active=!1,console.log("[HeroWeaponThrower] Hidden Backpack"));var t=h("Canvas/Instructions");t&&(t.active=!1,console.log("[HeroWeaponThrower] Hidden Instructions")),console.log("[HeroWeaponThrower] All game elements hidden")},r.showMainMenu=function(){console.log("[HeroWeaponThrower] Showing main menu...");var e=h("Canvas/MainMenu");e?(e.active=!0,console.log("[HeroWeaponThrower] Showed MainMenu")):console.warn("[HeroWeaponThrower] MainMenu node not found!");var o=h("Canvas/FightButton");o?(o.active=!0,console.log("[HeroWeaponThrower] Showed FightButton")):console.warn("[HeroWeaponThrower] FightButton node not found!");var n=h("Canvas/PlayNowButton");n?(n.active=!0,console.log("[HeroWeaponThrower] Showed PlayNowButton")):console.warn("[HeroWeaponThrower] PlayNowButton node not found!");var a=h("Canvas/Backpack");a?(a.active=!0,console.log("[HeroWeaponThrower] Showed Backpack")):console.warn("[HeroWeaponThrower] Backpack node not found!");var i=h("Canvas/Instructions");i?(i.active=!0,console.log("[HeroWeaponThrower] Showed Instructions")):console.warn("[HeroWeaponThrower] Instructions node not found!");var t=h("Canvas/HeroIdle");t?(t.active=!0,console.log("[HeroWeaponThrower] Showed HeroIdle")):console.warn("[HeroWeaponThrower] HeroIdle node not found!");var r=h("Canvas/WeaponManager");r?(r.active=!0,console.log("[HeroWeaponThrower] Showed WeaponManager")):console.warn("[HeroWeaponThrower] WeaponManager node not found!"),console.log("[HeroWeaponThrower] Main menu elements shown")},r.addMainMenuTouchListener=function(){var e=h("Canvas");e&&e.on(c.EventType.TOUCH_START,this.onMainMenuTouch,this)},r.onMainMenuTouch=function(e){this.showDownloadGame();var o=h("Canvas");o&&o.off(c.EventType.TOUCH_START,this.onMainMenuTouch,this)},r.showDownloadGame=function(){var e=h("Canvas/DownloadGame");if(e){e.active=!0;var o=e.getComponent(v);o||(o=e.addComponent(v)),o.opacity=0,g(o).to(.5,{opacity:255}).start()}},r.addRewardFadeInEffect=function(e){var o=e.getComponent(v);o&&(o.opacity=0,g(o).to(.5,{opacity:255}).start()),e.setScale(.8,.8,.8),g(e).to(.5,{scale:new p(1,1,1)}).start()},r.hideRewardNode=function(){var e=h("Canvas/Reward");e&&(e.active=!1)},r.playVictorySound=function(){var e=h("Canvas/AudioManager");if(e){var o=e.getComponent(W);o?o.playVictorySound?o.playVictorySound():console.error("[HeroWeaponThrower] playVictorySound method not found on AudioManager"):console.error("[HeroWeaponThrower] AudioManager component not found on node")}else{console.error("[HeroWeaponThrower] AudioManager node not found in scene");h("Canvas")}},r.stopAlertSound=function(){var e=h("Canvas/AudioManager");if(e){var o=e.getComponent(W);o&&o.stopAlertSound?o.stopAlertSound():console.warn("[HeroWeaponThrower] AudioManager component not found or missing stopAlertSound method")}else console.warn("[HeroWeaponThrower] AudioManager node not found")},r.resetRewardShowNode=function(){var e=h("Canvas/RewardShow");e?e.active=!1:console.warn("[HeroWeaponThrower] RewardShow Node not found")},r.playEnemyDieSound=function(){var e=h("Canvas/AudioManager");if(e){var o=e.getComponent(W);o&&o.playEnemyDieSound?o.playEnemyDieSound():console.warn("[HeroWeaponThrower] AudioManager component not found or missing playEnemyDieSound method")}else console.warn("[HeroWeaponThrower] AudioManager node not found")},r.playCongratsSound=function(){console.log("[HeroWeaponThrower] playCongratsSound() called");var e=h("Canvas/AudioManager");if(e){var o=e.getComponent(W);o&&o.playCongratsSound?(console.log("[HeroWeaponThrower] Playing congrats sound..."),o.playCongratsSound()):console.warn("[HeroWeaponThrower] AudioManager component not found or missing playCongratsSound method")}else console.warn("[HeroWeaponThrower] AudioManager node not found")},r.getHeroPosition=function(){var e=h("Canvas/HeroIdle");if(e)return e.getWorldPosition();if(e||(e=h("Canvas/Hero")),e||(e=h("Canvas/Game/Hero")),e||(e=h("Canvas/GameScene/Hero")),!e){var o=h("Canvas");if(o)for(var n,a=t(o.children);!(n=a()).done;){var i=n.value;if(i.name.toLowerCase().includes("hero")||i.name.toLowerCase().includes("player")){e=i;break}}}return e?e.getWorldPosition():new p(-200,0,0)},r.forceResetNow=function(){console.log("[HeroWeaponThrower] Force reset now!"),this.unscheduleAllCallbacks(),this.resetToMainMenu()},r.testResetToMainMenu=function(){console.log("[HeroWeaponThrower] Manual test reset to main menu..."),this.resetToMainMenu()},r.testTimerCallback=function(){console.log("[HeroWeaponThrower] Testing timer callback..."),this.onRewardShowTimerComplete()},r.forceClearBackpack=function(){console.log("[HeroWeaponThrower] Force clearing backpack...");var e=h("Canvas/Backpack");if(e){for(var o=e.children.length-1;o>=0;o--){var n=e.children[o];if(n&&n.isValid&&n.name.includes("Slot"))for(var a=n.children.length-1;a>=0;a--){var i=n.children[a];i&&i.isValid&&(console.log("[HeroWeaponThrower] Force destroying weapon:",i.name),i.destroy())}}console.log("[HeroWeaponThrower] Force clear backpack completed!")}},o}(b)).prototype,"weaponPrefabs",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A=o(I.prototype,"heroWeaponThrower",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=o(I.prototype,"throwSpeed",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 800}}),V=o(I.prototype,"throwRange",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e3}}),N=o(I.prototype,"throwInterval",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),F=o(I.prototype,"weaponLifetime",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.5}}),z=o(I.prototype,"gravity",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 500}}),O=o(I.prototype,"minEnemyDistanceToStartShooting",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 300}}),_=o(I.prototype,"weaponScales",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[1,1,1,1]}}),x=o(I.prototype,"weaponWidths",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[100,100,100,100]}}),L=o(I.prototype,"weaponHeights",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[100,100,100,100]}}),U=o(I.prototype,"childEnemy1DiePrefab",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=o(I.prototype,"childEnemy2DiePrefab",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=o(I.prototype,"bossDiePrefab",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=I))||k));r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./AttackSystem.ts","./AudioManager.ts","./BackpackManager.ts","./ButtonManager.ts","./CanvasSize.ts","./ClickHandAnimation.ts","./Enemy.ts","./EnemyManager.ts","./EnemyTag.ts","./HeroWeaponThrower.ts","./MergeEffectManager.ts","./RewardButtonHandler.ts","./RotatingObject.ts","./Slot.ts","./Weapon.ts","./WeaponManager.ts","./ZoomObject.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MergeEffectManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,i,f,o,r,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,i=e._decorator,f=e.find,o=e.Animation,r=e.Vec3,c=e.Component}],execute:function(){var a;n._RF.push({},"b7bedZpruZD8ZhB2/w66YyL","MergeEffectManager",void 0);var s=i.ccclass;i.property,e("MergeEffectManager",s("MergeEffectManager")(a=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),f=0;f<n;f++)i[f]=arguments[f];return(t=e.call.apply(e,[this].concat(i))||this).mergeEffectNode=null,t.animation=null,t.HIGH_Z_INDEX=100,t}t(n,e);var i=n.prototype;return i.start=function(){this.mergeEffectNode=f("Canvas/Backpack/MergeEffect"),this.mergeEffectNode&&(this.animation=this.mergeEffectNode.getComponent(o),this.mergeEffectNode.active=!1)},i.showMergeEffect=function(e,t){var n=this;if(void 0===t&&(t=200),this.mergeEffectNode){var i=new r(e.x,e.y,this.HIGH_Z_INDEX);this.mergeEffectNode.setPosition(i),this.mergeEffectNode.active=!0,this.animation&&this.animation.play&&this.animation.play(),setTimeout((function(){n.hideMergeEffect()}),t)}else console.warn("[MergeEffectManager] MergeEffect node not found!")},i.hideMergeEffect=function(){this.mergeEffectNode&&(this.mergeEffectNode.active=!1)},i.setZIndex=function(e){if(this.mergeEffectNode){var t=this.mergeEffectNode.getPosition();this.mergeEffectNode.setPosition(new r(t.x,t.y,e))}},i.getZIndex=function(){return this.mergeEffectNode?this.mergeEffectNode.getPosition().z:0},n}(c))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/RewardButtonHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,o,n,r,a,d,i,l,w,u,c,s,h,B;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,d=e._decorator,i=e.Node,l=e.find,w=e.Button,u=e.EventHandler,c=e.tween,s=e.Vec3,h=e.UIOpacity,B=e.Component}],execute:function(){var N,p,R,f,v,g,S,H,m;a._RF.push({},"9ae02rpfhhNIr1Mi6b55y7Y","RewardButtonHandler",void 0);var C=d.ccclass,y=d.property;e("RewardButtonHandler",(N=C("RewardButtonHandler"),p=y(i),R=y(i),f=y(i),N((S=t((g=function(e){function t(){for(var t,o=arguments.length,a=new Array(o),d=0;d<o;d++)a[d]=arguments[d];return t=e.call.apply(e,[this].concat(a))||this,n(t,"rewardButton",S,r(t)),n(t,"rewardNode",H,r(t)),n(t,"rewardShowNode",m,r(t)),t}o(t,e);var a=t.prototype;return a.start=function(){var e,t,o;(console.log("[RewardButtonHandler] === START INITIALIZATION ==="),this.rewardNode)||(this.rewardNode=l("Canvas/Reward"),console.log("[RewardButtonHandler] Found rewardNode:",null==(e=this.rewardNode)?void 0:e.name));this.rewardShowNode||(this.rewardShowNode=l("Canvas/RewardShow"),console.log("[RewardButtonHandler] Found rewardShowNode:",null==(t=this.rewardShowNode)?void 0:t.name));this.rewardButton||this.rewardNode&&(this.rewardButton=this.rewardNode.getChildByName("RewardButton"),console.log("[RewardButtonHandler] Found rewardButton:",null==(o=this.rewardButton)?void 0:o.name));this.setupButtonClick(),console.log("[RewardButtonHandler] === INITIALIZATION COMPLETE ===")},a.setupButtonClick=function(){if(console.log("[RewardButtonHandler] Setting up button click..."),this.rewardButton){console.log("[RewardButtonHandler] Reward button found:",this.rewardButton.name);var e=this.rewardButton.getComponent(w);if(e){console.log("[RewardButtonHandler] Button component found");var t=new u;t.target=this.node,t.component="RewardButtonHandler",t.handler="onRewardButtonClick",e.clickEvents.push(t),this.rewardButton.on(w.EventType.CLICK,this.onRewardButtonClick,this),console.log("[RewardButtonHandler] Button click events setup complete"),console.log("[RewardButtonHandler] Click events count:",e.clickEvents.length)}else console.error("[RewardButtonHandler] Button component not found on reward button")}else console.error("[RewardButtonHandler] Reward button not found")},a.onRewardButtonClick=function(){console.log("[RewardButtonHandler] 🎉 BUTTON CLICKED! 🎉"),console.log("[RewardButtonHandler] onRewardButtonClick method called!"),this.hideRewardNode(),this.showRewardShowNode()},a.hideRewardNode=function(){var e=this;if(this.rewardNode&&this.rewardNode.active){c(this.rewardNode).to(.3,{scale:new s(.8,.8,.8)}).call((function(){e.rewardNode.active=!1})).start();var t=this.rewardNode.getComponent(h);t&&c(t).to(.3,{opacity:0}).start()}},a.showRewardShowNode=function(){if(this.rewardShowNode){this.rewardShowNode.active=!0,this.rewardShowNode.setScale(.8,.8,.8);var e=this.rewardShowNode.getComponent(h);e&&(e.opacity=0),c(this.rewardShowNode).to(.5,{scale:new s(1,1,1)}).start(),e&&c(e).to(.5,{opacity:255}).start()}else console.warn("[RewardButtonHandler] RewardShow Node not found")},a.hideRewardShowNode=function(){var e=this;if(this.rewardShowNode&&this.rewardShowNode.active){c(this.rewardShowNode).to(.3,{scale:new s(.8,.8,.8)}).call((function(){e.rewardShowNode.active=!1})).start();var t=this.rewardShowNode.getComponent(h);t&&c(t).to(.3,{opacity:0}).start()}},a.resetRewardState=function(){this.rewardNode&&(this.rewardNode.active=!1),this.rewardShowNode&&(this.rewardShowNode.active=!1)},a.testButtonClick=function(){this.onRewardButtonClick()},a.debugButtonState=function(){if(console.log("[RewardButtonHandler] === DEBUG BUTTON STATE ==="),this.rewardButton){var e=this.rewardButton.getComponent(w);e?(console.log("[RewardButtonHandler] Button component found"),console.log("[RewardButtonHandler] Click events count:",e.clickEvents.length),e.clickEvents.forEach((function(e,t){var o;console.log("[RewardButtonHandler] Click event "+t+":",{target:null==(o=e.target)?void 0:o.name,component:e.component,handler:e.handler})}))):console.log("[RewardButtonHandler] No Button component found")}console.log("[RewardButtonHandler] === END DEBUG ===")},t}(B)).prototype,"rewardButton",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(g.prototype,"rewardNode",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(g.prototype,"rewardShowNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=g))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/RotatingObject.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,o,n,e,r,a,s,c;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Vec3,c=t.Component}],execute:function(){var u,l,h,p,R,f,g,y,b,d,w,m,x;r._RF.push({},"ecf7eQdNHVPZphFJmQY2RTy","RotatingObject",void 0);var A=a.ccclass,k=a.property;t("RotatingObject",(u=A("RotatingObject"),l=k({tooltip:"Tốc độ quay (độ/giây)"}),h=k({tooltip:"Trục quay (X, Y, Z)"}),p=k({tooltip:"Có quay hay không"}),R=k({tooltip:"Quay theo chiều ngược kim đồng hồ"}),f=k({tooltip:"Tự động bắt đầu quay khi start"}),u((b=i((y=function(t){function i(){for(var i,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return i=t.call.apply(t,[this].concat(r))||this,n(i,"rotationSpeed",b,e(i)),n(i,"rotationAxis",d,e(i)),n(i,"isRotating",w,e(i)),n(i,"counterClockwise",m,e(i)),n(i,"autoStart",x,e(i)),i.currentRotation=new s,i}o(i,t);var r=i.prototype;return r.start=function(){this.currentRotation=this.node.eulerAngles.clone(),this.autoStart&&this.startRotation()},r.update=function(t){if(this.isRotating){var i=this.rotationSpeed*t,o=this.counterClockwise?-1:1;this.currentRotation.x+=this.rotationAxis.x*i*o,this.currentRotation.y+=this.rotationAxis.y*i*o,this.currentRotation.z+=this.rotationAxis.z*i*o,this.node.setRotationFromEuler(this.currentRotation)}},r.startRotation=function(){this.isRotating=!0},r.stopRotation=function(){this.isRotating=!1},r.toggleDirection=function(){this.counterClockwise=!this.counterClockwise},r.setRotationSpeed=function(t){this.rotationSpeed=t},r.setRotationAxis=function(t){this.rotationAxis=t.clone(),this.rotationAxis.normalize()},r.resetRotation=function(){this.currentRotation=new s(0,0,0),this.node.setRotationFromEuler(this.currentRotation)},r.setRotation=function(t){this.currentRotation=t.clone(),this.node.setRotationFromEuler(this.currentRotation)},r.getRotationInfo=function(){return{currentRotation:this.currentRotation.clone(),rotationSpeed:this.rotationSpeed,rotationAxis:this.rotationAxis.clone(),isRotating:this.isRotating,counterClockwise:this.counterClockwise}},i}(c)).prototype,"rotationSpeed",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 90}}),d=i(y.prototype,"rotationAxis",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(0,0,1)}}),w=i(y.prototype,"isRotating",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),m=i(y.prototype,"counterClockwise",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),x=i(y.prototype,"autoStart",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),g=y))||g));r._RF.pop()}}}));

System.register("chunks:///_virtual/Slot.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var c,n,o,e;return{setters:[function(t){c=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,e=t.Component}],execute:function(){var r;n._RF.push({},"dc7cccHYm5Iq6ItLMutJaT2","Slot",void 0);var u=o.ccclass;o.property,t("Slot",u("Slot")(r=function(t){function n(){for(var c,n=arguments.length,o=new Array(n),e=0;e<n;e++)o[e]=arguments[e];return(c=t.call.apply(t,[this].concat(o))||this).isOccupied=!1,c.occupyingWeapon=null,c}return c(n,t),n}(e))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/Weapon.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BackpackManager.ts","./WeaponManager.ts","./Slot.ts","./AudioManager.ts"],(function(n){var e,o,a,t,i,r,c,s,p,g,l,d,u,h,f,k;return{setters:[function(n){e=n.inheritsLoose,o=n.createForOfIteratorHelperLoose},function(n){a=n.cclegacy,t=n._decorator,i=n.Node,r=n.find,c=n.Vec3,s=n.UITransform,p=n.Sprite,g=n.Color,l=n.instantiate,d=n.Component},function(n){u=n.BackpackManager},function(n){h=n.WeaponManager},function(n){f=n.Slot},function(n){k=n.AudioManager}],execute:function(){var v;a._RF.push({},"904b0ZFuPJEHbGvhP8xqw3v","Weapon",void 0);var M=t.ccclass;t.property,n("Weapon",M("Weapon")(v=function(n){function a(){for(var e,o=arguments.length,a=new Array(o),t=0;t<o;t++)a[t]=arguments[t];return(e=n.call.apply(n,[this].concat(a))||this).originalPosition=null,e.weaponManager=null,e.backpackManager=null,e.weaponId=0,e.initialIndex=0,e.weaponType="1slot",e.highlightedSlots=[],e.dragOffset=null,e.inBackpack=!1,e.slotsOccupied=[],e.audioManager=null,e}e(a,n);var t=a.prototype;return t.start=function(){this.node.on(i.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(i.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(i.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(i.EventType.TOUCH_CANCEL,this.onTouchEnd,this);var n=r("Canvas/WeaponManager");n&&(this.weaponManager=n.getComponent(h));var e=r("Canvas/Backpack");e&&(this.backpackManager=e.getComponent(u));var o=r("Canvas/AudioManager");o&&(this.audioManager=o.getComponent(k))},t.playPickupSound=function(){this.audioManager&&this.audioManager.playPickupSound()},t.playPlaceSound=function(){this.audioManager&&this.audioManager.playPlaceSound()},t.playAttackMergedSound=function(){this.audioManager&&this.audioManager.playAttackMergedSound()},t.onTouchStart=function(n){if(!this.weaponManager||!this.weaponManager.isLocked)if(this.weaponManager&&this.weaponManager.checkBackpackFull())this.weaponManager.setLockAndChargeEffect();else{this.playPickupSound(),this.originalPosition||(this.originalPosition=this.node.getPosition()),this.inBackpack&&this.slotsOccupied.length>0&&(this.slotsOccupied.forEach((function(n){var e=n.getComponent(f);e&&(e.isOccupied=!1)})),this.slotsOccupied=[]);var e=n.getUILocation?n.getUILocation():n.getLocation(),o=new c(e.x,e.y,0),a=this.node.getWorldPosition();this.dragOffset=a.subtract(o),this.inBackpack&&(this.node.setParent(this.weaponManager.node),this.inBackpack=!1)}},t.onTouchMove=function(n){var e=this;if((!this.weaponManager||!this.weaponManager.isLocked)&&this.backpackManager){var a=n.getUILocation?n.getUILocation():n.getLocation(),t=new c(a.x,a.y,0),i=this.node.parent.getWorldPosition(),r=t.add(this.dragOffset||new c).subtract(i);this.node.setPosition(r);var l=this.node.getComponent(s).getBoundingBoxToWorld();this.highlightedSlots.forEach((function(n){var e=n.getComponent(p);e&&(e.color=g.WHITE)})),this.highlightedSlots=[];for(var d,u=o(this.backpackManager.node.children);!(d=u()).done;){var h=d.value,k=h.getComponent(s).getBoundingBoxToWorld();if(l.intersects(k)){var v=this.backpackManager.getSlotsForWeapon(h,this.weaponType);if(v.length>0){var M=v.some((function(n){var o=n.getComponent(f);return o&&o.occupyingWeapon&&o.occupyingWeapon!==e}));if(v.every((function(n){var e=n.getComponent(f);return e&&!e.isOccupied}))){v.forEach((function(n){var e=n.getComponent(p);e&&(e.color=g.GREEN)})),this.highlightedSlots=v;break}if(M){v.forEach((function(n){var e=n.getComponent(p);e&&(e.color=g.RED)})),this.highlightedSlots=v;break}}}}}},t.onTouchEnd=function(n){var e=this;if(!this.weaponManager||!this.weaponManager.isLocked)if(this.highlightedSlots.forEach((function(n){var e=n.getComponent(p);e&&(e.color=g.WHITE)})),this.highlightedSlots=[],this.backpackManager){for(var t,i=n.getUILocation?n.getUILocation():n.getLocation(),d=(new c(i.x,i.y,0),this.node.getComponent(s).getBoundingBoxToWorld()),u=!1,h=function(){var n=t.value,o=n.getComponent(s).getBoundingBoxToWorld();if(d.intersects(o)){var i=e.backpackManager.getSlotsForWeapon(n,e.weaponType);if(i.length>0&&i.every((function(n){return n.getComponent(f)}))){var g=new Set,h=!1,k="",v=null;if(i.forEach((function(n){var o=n.getComponent(f);o&&o.occupyingWeapon&&o.occupyingWeapon!==e&&("1slot"===e.weaponType&&"1slot"===o.occupyingWeapon.weaponType||"3slot"===e.weaponType&&"3slot"===o.occupyingWeapon.weaponType?(h=!0,k="1slot"===e.weaponType?"1slot_merge":"3slot_merge",v=n,g.add(o.occupyingWeapon)):g.add(o.occupyingWeapon))})),h&&v){if(g.forEach((function(n){var e=n,o=e.node;e.slotsOccupied&&e.slotsOccupied.forEach((function(n){var e=n.getComponent(f);e&&(e.isOccupied=!1,e.occupyingWeapon=null)})),o.setParent(null),o.destroy()})),e.slotsOccupied&&e.slotsOccupied.forEach((function(n){var e=n.getComponent(f);e&&(e.isOccupied=!1,e.occupyingWeapon=null)})),e.node.setParent(null),e.node.destroy(),e.weaponManager){var M="";"1slot_merge"===k&&(M="weapon_1slot_merge"),"3slot_merge"===k&&(M="weapon_3slot_merge");var w=e.weaponManager.weaponSprites.find((function(n){return n.name===M}));if(w){var y=l(e.weaponManager.weaponPrefab),m=y.getComponent(a);m.weaponType=k,m.weaponManager=e.weaponManager,m.backpackManager=e.backpackManager,y.getComponent(p).spriteFrame=w;var P=[v];if("3slot_merge"===k){var W=99,C=0;i.forEach((function(n){var e=n.name.match(/Slot_(\d+)_(\d+)/);if(e){var o=parseInt(e[1]);C=parseInt(e[2]),o<W&&(W=o)}})),P=[e.backpackManager.node.getChildByName("Slot_"+W+"_"+C),e.backpackManager.node.getChildByName("Slot_"+(W+1)+"_"+C),e.backpackManager.node.getChildByName("Slot_"+(W+2)+"_"+C)].filter(Boolean)}var S=P[0].getWorldPosition(),T=P[P.length-1].getWorldPosition(),O=S.add(T).multiplyScalar(.5),E=e.backpackManager.node.getWorldPosition(),b=O.subtract(E);y.setParent(e.backpackManager.node),y.setPosition(b);var B=y.getComponent(s),_=70,I=70;"1slot_merge"===k?(_=e.weaponManager.weaponWidths[6]||70,I=e.weaponManager.weaponHeights[6]||70):"3slot_merge"===k&&(_=e.weaponManager.weaponWidths[7]||70,I=e.weaponManager.weaponHeights[7]||220),B&&B.setContentSize(_,I);var L=v.getComponent(f);L&&(L.isOccupied=!0,L.occupyingWeapon=m),m.inBackpack=!0,m.slotsOccupied=[v];var x=r("Canvas/Backpack/MergeEffect");if(x&&y){x.active=!0;var H=y.getPosition(),A=new c(H.x,H.y,999);x.setPosition(A),x.setScale(new c(1,1,1));var U=x.getComponent("cc.Animation");U&&U.play&&U.play(),setTimeout((function(){x.active=!1}),400),e.playAttackMergedSound()}}}return u=!0,0}g.forEach((function(n){var o=n;o.node&&o.node.isValid&&(o.slotsOccupied&&o.slotsOccupied.forEach((function(n){var e=n.getComponent(f);e&&(e.isOccupied=!1,e.occupyingWeapon=null)})),o.node.setParent(e.weaponManager.node),o.inBackpack=!1,o.slotsOccupied=[])})),e.updateWeaponsInStockPosition(),i.forEach((function(n){var o=n.getComponent(f);o&&(o.isOccupied=!0,o.occupyingWeapon=e)}));var F=i[0].getWorldPosition(),N=i[i.length-1].getWorldPosition(),R=F.add(N).multiplyScalar(.5),V=e.backpackManager.node.getWorldPosition(),z=R.subtract(V);if(e.node.setParent(e.backpackManager.node),e.node.setPosition(z),e.inBackpack=!0,e.slotsOccupied=i,e.playPlaceSound(),e.weaponManager){var D=e.weaponManager.node.children.map((function(n){var e=n.getComponent(a);return e?e.weaponType:null})).filter((function(n){return null!==n})),G=["1slot","2slot","3slot","rare"].filter((function(n){return-1===D.map(String).indexOf(String(n))}));if(G.length>0){var j=G[Math.floor(Math.random()*G.length)],q=0;q="1slot"===j?0:"2slot"===j?1:"3slot"===j?2:3,e.weaponManager.spawnNewWeapon(q)}}return u=!0,0}}},k=o(this.backpackManager.node.children);!(t=k()).done&&0!==h(););if(!u)if(this.slotsOccupied.length>0){var v=this.slotsOccupied[0].getWorldPosition(),M=this.slotsOccupied[this.slotsOccupied.length-1].getWorldPosition(),w=v.add(M).multiplyScalar(.5),y=this.backpackManager.node.getWorldPosition(),m=w.subtract(y);this.node.setParent(this.backpackManager.node),this.node.setPosition(m),this.inBackpack=!0}else this.originalPosition&&this.node.setPosition(this.originalPosition);this.updateWeaponsInStockPosition()}else this.originalPosition&&this.node.setPosition(this.originalPosition)},t.updateWeaponsInStockPosition=function(){var n=this;if(this.weaponManager){var e=this.weaponManager.node.children.filter((function(n){var e=n.getComponent(a);return e&&!e.inBackpack&&n.activeInHierarchy&&n.isValid}));e.forEach((function(o,a){var t=(a-(e.length-1)/2)*(n.weaponManager.weaponSize+n.weaponManager.gap);o.setPosition(new c(t,-250,0))}))}},t.isInBackpack=function(){return this.inBackpack},a}(d))||v);a._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Weapon.ts","./AudioManager.ts"],(function(e){var n,t,a,o,i,r,s,p,l,c,u,h,d,f,w,g,v,m,C,y;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,a=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,r=e._decorator,s=e.Prefab,p=e.SpriteFrame,l=e.find,c=e.instantiate,u=e.Sprite,h=e.UITransform,d=e.Vec3,f=e.Node,w=e.Color,g=e.UIOpacity,v=e.tween,m=e.Component},function(e){C=e.Weapon},function(e){y=e.AudioManager}],execute:function(){var W,b,S,z,M,P,k,T,_,x,B,N,L;i._RF.push({},"3a0044yZz5ETLZ5h8YqSKnL","WeaponManager",void 0);var E=r.ccclass,I=r.property;e("WeaponManager",(W=E("WeaponManager"),b=I(s),S=I([p]),z=I([Number]),M=I([Number]),W((T=n((k=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return n=e.call.apply(e,[this].concat(i))||this,a(n,"weaponPrefab",T,o(n)),a(n,"weaponSprites",_,o(n)),a(n,"weaponWidths",x,o(n)),a(n,"weaponHeights",B,o(n)),a(n,"weaponSize",N,o(n)),a(n,"gap",L,o(n)),n.weaponCount=0,n.maxWeapons=6,n.isLocked=!1,n.loadDelay=1,n.audioManager=null,n}t(n,e);var i=n.prototype;return i.start=function(){this.createInitialWeapons();var e=l("Canvas/AudioManager");e&&(this.audioManager=e.getComponent(y))},i.createInitialWeapons=function(){for(var e=0;e<3;e++)this.createWeapon(e)},i.createWeapon=function(e){var n,t=this;if(!(this.weaponCount>=this.maxWeapons)){var a=c(this.weaponPrefab),o=a.getComponent(C);o.weaponId=this.weaponCount,o.initialIndex=e;var i="1slot",r=a.getComponent(u);r.spriteFrame=this.weaponSprites[this.weaponCount%this.weaponSprites.length];var s=(null==(n=r.spriteFrame)?void 0:n.name)||"";s.includes("weapon_1slot")?i="1slot":s.includes("weapon_2slot")?i="2slot":s.includes("weapon_3slot")?i="3slot":s.includes("weapon_rare")&&(i="rare"),o.weaponType=i;var p=a.getComponent(h),m=this.weaponWidths[this.weaponCount%this.weaponWidths.length]||this.weaponSize,y=this.weaponHeights[this.weaponCount%this.weaponHeights.length]||this.weaponSize;p&&p.setContentSize(m,y);var W=(e-1)*(this.weaponSize+this.gap);a.setPosition(new d(W,-250,0)),this.node.addChild(a),this.weaponCount>=3&&setTimeout((function(){var e=l("Canvas/GenWeaponEffect");if(!e){var n=l("Canvas");n&&(e=n.getChildByName("GenWeaponEffect"))}if(e){e.active=!0;var o=a.getWorldPosition(),i=l("Canvas");if(i){var r=i.getWorldPosition(),s=new d(o.x-r.x,o.y-r.y,999);e.setPosition(s)}else{var p=new d(o.x,o.y,999);e.setPosition(p)}var c=e.getComponent("cc.Animation");c&&c.play&&c.play(),setTimeout((function(){e.active=!1}),500)}else{var g=l("Canvas");if(g){var v=new f("GenWeaponEffect"),m=v.addComponent(u);v.addComponent(h).setContentSize(100,100),m.color=new w(255,0,0,255),g.addChild(v),v.setPosition(new d(0,0,999)),v.active=!1}}t.audioManager&&t.audioManager.playWeaponSpawnSound()}),0),a.setScale(new d(.5,.5,1));var b=a.getComponent(g);b||(b=a.addComponent(g)),b.opacity=0,v(a).to(.3,{scale:new d(1,1,1)}).start(),v(b).to(.3,{opacity:255}).start(),p&&p.setContentSize(m,y),this.weaponCount++}},i.spawnNewWeapon=function(e){this.weaponCount<this.maxWeapons&&this.createWeapon(e)},i.checkBackpackFull=function(){var e;if(!this.node.scene)return!1;var n=null==(e=this.node.scene.getChildByName("Canvas"))?void 0:e.getChildByName("Backpack");if(!n)return!1;var t=["2slot","rare","3slot_merge","1slot_merge"],a=new Set;return n.children.forEach((function(e){if(e&&e.isValid){var n=e.getComponent("Weapon");n&&"string"==typeof n.weaponType&&-1!==t.indexOf(n.weaponType)&&a.add(n.weaponType)}})),4===a.size},i.sequentialLoadWeapons=function(e,n){var t=this,a=void 0!==n?n:this.loadDelay,o=0;!function n(){o>=e.length||(t.createWeapon(e[o]),++o<e.length&&setTimeout(n,1e3*a))}()},i.setLockAndChargeEffect=function(){var e;this.isLocked=!0;var n=null==(e=this.node.scene.getChildByName("Canvas"))?void 0:e.getChildByName("Backpack");n&&n.children.forEach((function(e){if(e&&e.isValid){var n=e.getComponent(u);n&&(n.color=new w(80,80,80,255),v(n).to(1,{color:new w(255,255,255,255)}).start())}}))},n}(m)).prototype,"weaponPrefab",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=n(k.prototype,"weaponSprites",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=n(k.prototype,"weaponWidths",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[70,160,70]}}),B=n(k.prototype,"weaponHeights",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[70,40,220]}}),N=n(k.prototype,"weaponSize",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),L=n(k.prototype,"gap",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),P=k))||P));i._RF.pop()}}}));

System.register("chunks:///_virtual/ZoomObject.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var t,e,i,n,r,a,l,c,s;return{setters:[function(o){t=o.applyDecoratedDescriptor,e=o.inheritsLoose,i=o.initializerDefineProperty,n=o.assertThisInitialized},function(o){r=o.cclegacy,a=o._decorator,l=o.Vec3,c=o.tween,s=o.Component}],execute:function(){var u,h,p,m,S,f,g,Z,w,z,b,d,y,L,v,T,C,x,I,D,P,M,O,j,k,R,_,A,B;r._RF.push({},"f6833JUg6tPRqjiia0LHzEp","ZoomObject",void 0);var F=a.ccclass,H=a.property;o("ZoomObject",(u=F("ZoomObject"),h=H({tooltip:"Tốc độ zoom (scale/giây)"}),p=H({tooltip:"Scale tối thiểu"}),m=H({tooltip:"Scale tối đa"}),S=H({tooltip:"Scale hiện tại"}),f=H({tooltip:"Có đang zoom hay không"}),g=H({tooltip:"Tự động zoom khi start"}),Z=H({tooltip:"Zoom in hay zoom out"}),w=H({tooltip:"Sử dụng tween animation"}),z=H({tooltip:"Thời gian tween (giây)"}),b=H({tooltip:"Lặp lại zoom"}),d=H({tooltip:"Số lần lặp (-1 = vô hạn)"}),y=H({tooltip:"Delay giữa các lần lặp (giây)"}),L=H({tooltip:"Lặp kiểu ping-pong (zoom in -> zoom out -> zoom in...)"}),u((C=t((T=function(o){function t(){for(var t,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=o.call.apply(o,[this].concat(r))||this,i(t,"zoomSpeed",C,n(t)),i(t,"minScale",x,n(t)),i(t,"maxScale",I,n(t)),i(t,"currentScale",D,n(t)),i(t,"isZooming",P,n(t)),i(t,"autoZoom",M,n(t)),i(t,"zoomIn",O,n(t)),i(t,"useTween",j,n(t)),i(t,"tweenDuration",k,n(t)),i(t,"loopZoom",R,n(t)),i(t,"loopCount",_,n(t)),i(t,"loopDelay",A,n(t)),i(t,"pingPongLoop",B,n(t)),t.originalScale=new l,t.targetScale=new l,t.currentTween=null,t.currentLoopCount=0,t}e(t,o);var r=t.prototype;return r.start=function(){this.originalScale=this.node.scale.clone(),this.currentScale=this.originalScale.x,this.autoZoom&&this.startZoom()},r.update=function(o){if(this.isZooming&&!this.useTween){var t=this.zoomSpeed*o,e=this.zoomIn?1:-1;this.currentScale+=t*e,this.currentScale=Math.max(this.minScale,Math.min(this.maxScale,this.currentScale)),this.node.setScale(this.currentScale,this.currentScale,this.currentScale),(this.zoomIn&&this.currentScale>=this.maxScale||!this.zoomIn&&this.currentScale<=this.minScale)&&this.stopZoom()}},r.startZoom=function(){this.isZooming=!0,this.useTween&&this.startTweenZoom()},r.stopZoom=function(){this.isZooming=!1,this.currentTween&&(this.currentTween.stop(),this.currentTween=null)},r.zoomInAction=function(){this.zoomIn=!0,this.startZoom()},r.zoomOutAction=function(){this.zoomIn=!1,this.startZoom()},r.toggleZoomDirection=function(){this.zoomIn=!this.zoomIn},r.setScale=function(o){this.currentScale=Math.max(this.minScale,Math.min(this.maxScale,o)),this.node.setScale(this.currentScale,this.currentScale,this.currentScale)},r.resetScale=function(){this.currentScale=this.originalScale.x,this.node.setScale(this.originalScale)},r.setZoomSpeed=function(o){this.zoomSpeed=o},r.setScaleLimits=function(o,t){this.minScale=o,this.maxScale=t},r.startTweenZoom=function(){var o=this;this.currentTween&&this.currentTween.stop();var t=this.zoomIn?this.maxScale:this.minScale;this.currentTween=c(this.node).to(this.tweenDuration,{scale:new l(t,t,t)}).call((function(){o.currentScale=t,o.loopZoom&&(-1===o.loopCount||o.currentLoopCount<o.loopCount)?(o.currentLoopCount++,o.loopDelay>0?o.scheduleOnce((function(){o.continueLoop()}),o.loopDelay):o.continueLoop()):(o.stopZoom(),o.currentLoopCount=0)})).start()},r.continueLoop=function(){this.pingPongLoop&&(this.zoomIn=!this.zoomIn),this.startTweenZoom()},r.zoomToScale=function(o,t){var e=this,i=t||this.tweenDuration,n=Math.max(this.minScale,Math.min(this.maxScale,o));this.currentTween&&this.currentTween.stop(),this.currentTween=c(this.node).to(i,{scale:new l(n,n,n)}).call((function(){e.currentScale=n})).start()},r.zoomByRatio=function(o,t){var e=this.originalScale.x*o;this.zoomToScale(e,t)},r.pulseZoom=function(o,t){var e=this;void 0===o&&(o=1.2),void 0===t&&(t=.3);var i=Math.max(this.minScale,Math.min(this.maxScale,o));this.currentTween&&this.currentTween.stop(),this.currentTween=c(this.node).to(t,{scale:new l(i,i,i)}).to(t,{scale:this.originalScale}).call((function(){e.currentScale=e.originalScale.x})).start()},r.startLoopZoom=function(o,t,e){void 0===o&&(o=-1),void 0===t&&(t=0),void 0===e&&(e=!1),this.loopZoom=!0,this.loopCount=o,this.loopDelay=t,this.pingPongLoop=e,this.currentLoopCount=0,this.startZoom()},r.stopLoopZoom=function(){this.loopZoom=!1,this.currentLoopCount=0,this.stopZoom()},r.pingPongZoom=function(o,t){void 0===o&&(o=-1),void 0===t&&(t=0),this.startLoopZoom(o,t,!0)},r.loopZoomIn=function(o,t){void 0===o&&(o=-1),void 0===t&&(t=0),this.zoomIn=!0,this.startLoopZoom(o,t,!1)},r.loopZoomOut=function(o,t){void 0===o&&(o=-1),void 0===t&&(t=0),this.zoomIn=!1,this.startLoopZoom(o,t,!1)},r.loopPulseZoom=function(o,t,e,i){void 0===o&&(o=-1),void 0===t&&(t=1.2),void 0===e&&(e=.3),void 0===i&&(i=0),this.loopZoom=!0,this.loopCount=o,this.loopDelay=i,this.currentLoopCount=0,this.startLoopPulseZoom(t,e)},r.startLoopPulseZoom=function(o,t){var e=this;this.currentTween&&this.currentTween.stop();var i=Math.max(this.minScale,Math.min(this.maxScale,o));this.currentTween=c(this.node).to(t,{scale:new l(i,i,i)}).to(t,{scale:this.originalScale}).call((function(){e.currentScale=e.originalScale.x,e.loopZoom&&(-1===e.loopCount||e.currentLoopCount<e.loopCount)?(e.currentLoopCount++,e.loopDelay>0?e.scheduleOnce((function(){e.startLoopPulseZoom(o,t)}),e.loopDelay):e.startLoopPulseZoom(o,t)):(e.stopZoom(),e.currentLoopCount=0)})).start()},r.getZoomInfo=function(){return{currentScale:this.currentScale,originalScale:this.originalScale.clone(),minScale:this.minScale,maxScale:this.maxScale,zoomSpeed:this.zoomSpeed,isZooming:this.isZooming,zoomIn:this.zoomIn,useTween:this.useTween,loopZoom:this.loopZoom,loopCount:this.loopCount,currentLoopCount:this.currentLoopCount,loopDelay:this.loopDelay,pingPongLoop:this.pingPongLoop}},t}(s)).prototype,"zoomSpeed",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),x=t(T.prototype,"minScale",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),I=t(T.prototype,"maxScale",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),D=t(T.prototype,"currentScale",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),P=t(T.prototype,"isZooming",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),M=t(T.prototype,"autoZoom",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),O=t(T.prototype,"zoomIn",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),j=t(T.prototype,"useTween",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),k=t(T.prototype,"tweenDuration",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),R=t(T.prototype,"loopZoom",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=t(T.prototype,"loopCount",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),A=t(T.prototype,"loopDelay",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),B=t(T.prototype,"pingPongLoop",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=T))||v));r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});